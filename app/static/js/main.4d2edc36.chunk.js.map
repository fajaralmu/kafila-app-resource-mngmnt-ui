{"version":3,"sources":["settings.ts","utils/eventUtil.ts","constants/DialogType.ts","services/RoutingService.ts","pages/ControlledComponent.tsx","models/BaseModel.ts","services/AuthService.ts","apiClients/RestClient.ts","services/ToastService.ts","components/dialog/DialogPrompt.tsx","services/DialogService.tsx","utils/cookieUtil.ts","utils/restApiUtil.ts","models/User.ts","services/MasterDataService.ts","services/LoadingService.ts","services/ClassMemberService.ts","services/SchoolConfigService.ts","services/FileUploadService.ts","services/EventService.ts","inversify.config.ts","reportWebVitals.ts","components/buttons/ActionButton.tsx","layout/ViewTemplate.tsx","models/BaseState.ts","models/MasterDataResult.ts","models/BaseMasterDataState.ts","models/DataTableHeaderValue.ts","models/Employee.ts","utils/commonWrapper.tsx","utils/stringUtil.ts","pages/BasePage.tsx","components/buttons/AnchorButton.tsx","components/buttons/PaginationButtons.tsx","components/dataTableHeader/DataTableHeader.tsx","pages/admin/masterData/BaseMasterDataPage.tsx","pages/admin/masterData/EmployeesPage.tsx","pages/admin/MainAdminPage.tsx","models/School.ts","pages/admin/masterData/SelectEmployeeForm.tsx","pages/admin/masterData/SchoolConfigForm.tsx","pages/admin/masterData/SchoolsPage.tsx","pages/admin/masterData/UsersPage.tsx","components/messages/ErrorMessage.tsx","components/messages/InfoMessage.tsx","utils/componentUtil.tsx","pages/auth/LoginPage.tsx","pages/error/ErrorView.tsx","pages/home/Home.tsx","pages/user/Dashboard.tsx","pages/user/EditProfile.tsx","models/SemesterPeriod.ts","pages/admin/masterData/SemesterPeriodsPage.tsx","models/ClassLevel.ts","models/Student.ts","models/ClassMember.ts","pages/admin/masterData/ClassLevelMembersPage.tsx","pages/admin/masterData/ClassLevelsPage.tsx","pages/admin/masterData/StudentsPage.tsx","pages/admin/masterData/ClassMembersPage.tsx","layout/Routing.tsx","layout/UserSection.tsx","layout/HeaderView.tsx","components/loading/Loading.tsx","components/toast/Toast.tsx","components/toast/ToastContainer.tsx","components/dialog/Dialog.tsx","components/dialog/DialogContainer.tsx","App.tsx","index.tsx"],"names":["Settings","this","_setting","window","appSetting","undefined","invokeLater","callback","intervalMs","timeout","setTimeout","clearTimeout","DialogType","RoutingService","injectable","lastRedirectedRoute","navigateFunction","routeUpdateCallbacks","Map","setLastRedirectedRoute","origin","setNavigate","navigate","url","registerCallback","set","deRegisterCallback","delete","updateRoute","console","debug","forEach","ControlledComponent","handleInputChange","e","target","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","value","input","state","id","type","checked","rawName","name","split","obj","key","index","length","setState","el","document","getElementById","focus","Component","BaseModel","LOGIN_URL","App","hosts","api","LOGOUT_URL","LOAD_USER_URL","LOAD_APP_URL","UPDATE_PROFILE_URL","AuthService","inject","RestClient","_loggedUser","_appProfile","_onUserUpdate","_onAppProfileUpdate","addOnUserUpdated","action","removeOnUserUpdated","addOnAppProfileUpdated","removeOnAppProfileUpdated","loadApplication","Promise","resolve","reject","rest","getCommon","then","response","loadUser","catch","loginKeyCookieExist","getAuthorized","handleSuccessLogin","error","updateProfile","user","res","rej","putAuthorized","login","username","password","formData","FormData","append","parameters","axios","post","join","headers","responseJson","data","loginKey","result","err","Error","message","loggedUser","Object","assign","User","setLoginKeyCookie","routing","redirectedRoute","logout","postAuthorized","removeLoginKeyCookie","loggedIn","hasAuthorityType","SUCCESS_CODE","LoadingService","body","contentType","postCommon","commonAuthorizedHeader","deleteAuthorized","deleteCommon","putCommon","patchAuthorized","patchCommon","startLoading","loading","stopLoading","expectRefreshToken","code","updateLoginKeyCookie","finally","put","patch","get","ToastService","component","setComponent","c","show","mode","duration","State","content","DialogPrompt","props","inputRef","React","createRef","onSubmit","preventDefault","defaultValue","current","ref","onChange","className","required","INVOCATION_WAIT_DELAY","DialogService","container","setContainer","showInfo","title","isShown","INFO","info","showWarning","WARNING","showError","messageContent","trim","toLowerCase","startsWith","dangerouslySetInnerHTML","__html","ERROR","showConfirmDanger","showConfirm","showConfirmWarning","showPrompt","doShowPrompt","showNoButtons","val","dismissAlert","showContent","observer","close","createElement","dialogObserver","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","getCookie","ca","decodeURIComponent","i","charAt","substring","indexOf","LOGIN_KEY_NAME","token","getLoginKeyCookie","displayName","fullName","phoneNumber","email","editPassword","authorities","userAuthType","t","birthDate","birthPlace","gender","API_URL","MasterDataService","model","patchAction","list","page","perPage","order","orderDesc","filter","fieldPaths","displayFieldAliases","orderString","filterToQuery","fieldPathsQuery","displayAliasesToQuery","toQueryParam","params","filters","element","push","ClassMemberService","getMembers","classLevelId","getActiveClasses","URL_GET_ACTIVE_CLASSES","SchoolConfigService","getConfig","schoolId","update","config","FileUploadService","uploadSignature","employee","file","toString","EventService","Container","bind","toSelf","inSingletonScope","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ActionButton","disabledProps","disabled","onClick","iconClass","children","ViewTemplate","goBack","back","attributes","style","textAlign","titleAlign","BaseState","busy","MasterDataResult","totalData","limit","items","BaseMasterDataState","item","showForm","DataTableHeaderValue","label","orderable","filterable","adjustLabel","includes","splitByDot","capitalize","toUpperCase","Employee","nisdm","profileImage","noKk","noKtp","addressKtp","addressOther","motherName","fatherName","npwp","bankAccountNumber","educations","schools","photoScan","kkScan","npwpScan","bankAccountScan","signatureFile","active","removeEducation","splice","addSchool","school","warn","removeSchool","Education","major","certificateScan","commonWrapper","routeParams","useParams","doNavigate","useNavigate","routingService","randomString","characters","charactersLength","Math","floor","random","getInputReadableDate","date","getFullYear","twoDigits","getMonth","getDate","BasePage","authorized","initialize","uiSetting","defaultTitle","gotoHomePage","invalidSession","forceUpdate","authService","AnchorButton","to","PaginationButtons","buttonIndexes","generateButtonValues","activePage","lastIndex","nextPage","previusPage","map","currentPage","displayed_buttons","buttonCount","ceil","min","max","DataTableHeader","activeOrder","textColor","isActive","BaseMasterDataPage","load","service","filterParams","assignedItems","defaultItem","onFormSubmit","insert","dialog","hideForm","edit","ok","resp","loadCurrentPage","showInsertForm","resetFilter","resetFormAndClose","afterFormCloseCallback","formEditSubmit","loadFromForm","setItemsOrder","desc","getDataTableHeaderComponent","getDataTableHeaderVals","isOrderDesc","onFilterChange","actionButton","showDelete","listToggler","add","remove","array","defaultLimit","colSpan","FormInputLimit","useState","setLimit","parseInt","EmployeesPage","educationId","addEducation","submitAddEducation","education","schoolsResponse","submitAddSchool","showSignatureForm","closeObs","submit","emp","upload","toast","showSuccess","showDanger","closeFormButton","showFormButton","overflow","paginationButton","startingNumber","toLocaleDateString","width","height","src","signaturePath","ed","tableFooter","FormUploadSignature","setFile","File","files","accept","FormEdit","AddEducationForm","AddSchoolForm","selectedSchool","MainAdminPage","managementPages","m","School","nis","address","level","SelectEmployeeForm","search","searchEmployee","handleSearchEmployee","employees","closeDropdown","setSelectedEmployee","selectedEmployee","onSelect","placeholder","position","overflowY","saveConfig","selectHeadMaster","showSelectEmployeeForm","selectAdmin","field","headMaster","admin","showConfigForm","configService","UsersPage","resetPassword","a","toLocaleLowerCase","flexWrap","ErrorMessage","InfoMessage","CommonTable","row","rowKey","col","loginSuccess","log","isAdmin","padding","ErrorView","showTitle","welcomingWords","Home","welcomingWord","_mounted","startDisplayWelcomingWord","isMounted","words","paddingTop","word","WelcomingWord","fontSize","fontWeight","autoComplete","SemesterPeriod","semester","year","direktur","bendahara","pengawasSekolah","headHRD","hearMR","headRnD","headLogistic","headPublicRelation","headLanguage","headPesantren","wakabidTahfiz","wakabidAsrama","adminKiis","adminTahfiz","adminAsrama","pjQurban","pjRamadhan","pjPromosiPSB","pjWebMedia","pjTamuFO","pjAlumni","pjUtsUas","pjEvaluasiPengembanganKurikulum","pjLabKomputer","pjLabIPA","pjLabBahasa","pjBinaPrestasi","pjPerpustakaan","pjBK","pjBahasaArab","pjBahasaInggris","pjUKS","pjOpkiis","pjDKM","pjKesiswaan","pjKurikulum","EmployeeFields","setActive","setEmployeeInCharge","employeeCellFields","employeeFields","display","SetEmployeeForm","ClassLevel","letter","description","semesterActive","memberCount","Student","nisKiis","nisn","city","province","siblingNum","siblingCount","fatherBirthDate","fatherBirthPlace","fatherEducation","fatherPhoneNumber","fatherOccupation","fatherAddress","fatherIncome","motherBirthDate","motherBirthPlace","motherEducation","motherPhoneNumber","motherOccupation","motherAddress","motherIncome","originSchool","sttbNumber","entranceDate","entranceClass","transferFrom","transferReason","entranceCertificateScore","leaveSchool","leaveReason","educationFinished","graduationDateMts","certificateNumberMts","seniorLevelSchool","graduationDateMa","certificateNumberMa","graduationCeremonyDate","highEducationUniv","highEducationMajor","workDate","workCompany","ClassMember","student","classLevel","ClassLevelMembersPage","loadMembers","members","loadStudents","searchStudent","masterData","students","closeStudentDropdown","addStudent","member","deleteMember","alignItems","showEditMember","showEditMemberForm","closeEditMemberForm","setSchool","loadClasses","classMemberService","handleClassLoaded","classes","masterDataService","handleStudentLoaded","setSelectedStudent","setSelectedClass","submitForm","Routing","path","disabledWhenLoggedIn","requiredRole","RestrictedRouteElement","CustomNavigate","replace","showDropdown","UserSection","hideDropdown","dataset","toggleDropdown","zIndex","activeMenu","searchKey","HeaderView","_user","gotoLoginPage","onUserUpdated","onAppProfileUpdated","brandOnClick","appProfile","margin","semesterInfo","Loading","opacity","outerSize","transitionDuration","xmlns","viewBox","fill","strokeWidth","Toast","onClose","ToastContainer","toastRefs","ToastId","getRef","closeToast","has","reversed","reverse","initialMargin","backColor","marginTop","Backdrop","backgroundColor","bgColor","Footer","yesButton","onConfirm","yesLabel","yesOnly","cancelButton","onCancel","Header","Dialog","focusCancelBtn","stringContent","INFO_NO_BUTTONS","maxWidth","dialogStyle","marginLeft","marginRight","modalDialogClass","headerClassName","maxHeight","DialogContainer","dialogTitle","dialogContent","dialogYesOnly","dialogOnConfirm","dialogOnCancel","onCloseCallback","dialogType","dialogOnClose","resetProps","dialogService","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","loaded","loadingError","Root","loc","useLocation","currentLocation","global","self","MonacoEnvironment","getWorkerUrl","_moduleId","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.4d2edc36.chunk.js","sourcesContent":["let SettingValues:{\r\n        \r\n  \r\n    uiSetting: {\r\n      \r\n        defaultTitle: string\r\n    },\r\n     \r\n    hosts:{ \r\n        api: string,\r\n      \r\n    }\r\n};\r\ntype SettingsType = typeof SettingValues;\r\n \r\nexport default class Settings {\r\n\r\n    private static _setting:SettingsType|undefined = undefined;\r\n\r\n    public static get App() : SettingsType\r\n    {\r\n        if (this._setting)\r\n        {\r\n            return this._setting;\r\n        }\r\n         \r\n        return this._setting = (window as any).appSetting;\r\n    }\r\n    \r\n}","export const invokeLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n        callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}","export enum DialogType {\r\n    INFO, WARNING, ERROR,\r\n    INFO_NO_BUTTONS,\r\n}","import 'reflect-metadata'\nimport { injectable } from \"inversify\";\nimport { NavigateFunction } from \"react-router-dom\";\n\n@injectable()\nexport default class RoutingService {\n    private lastRedirectedRoute?:string;\n    private navigateFunction:NavigateFunction | undefined;\n\n    get redirectedRoute() { return this.lastRedirectedRoute }\n    private readonly routeUpdateCallbacks:Map<string, (url:string)=>any> = new Map();\n\n    constructor()\n    {\n\n    }\n\n    setLastRedirectedRoute = (origin: string) => {\n        this.lastRedirectedRoute = origin;\n    }\n    \n    setNavigate = (navigate: NavigateFunction) => {\n        this.navigateFunction = navigate;\n    }\n    navigate = (url:string) => {\n        if (this.navigateFunction)  \n            this.navigateFunction(url);\n    }\n\n    registerCallback = (origin:string, callback:(url:string)=>any) => {\n        this.routeUpdateCallbacks.set(origin, callback);\n    }\n    deRegisterCallback = (origin:string) => {\n        this.routeUpdateCallbacks.delete(origin);\n    }\n    updateRoute = (url:string) => {\n        console.debug(\"Route changed via call to navigate: \" + url);\n        this.routeUpdateCallbacks.forEach((callback)=>{\n            callback(url);\n        })\n    }\n}","import React, { ChangeEvent, Component } from \"react\";\r\n\r\nexport default abstract class ControlledComponent<P,S > extends Component<P,S> {\r\n    handleInputChange = (e:ChangeEvent, callback?:(val:any)=>any) => {\r\n        if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement || e.target instanceof HTMLSelectElement)\r\n        {\r\n            const input:HTMLInputElement|HTMLTextAreaElement|HTMLSelectElement = e.target;\r\n            const state = this.state as any;\r\n            const id = input.id;\r\n            if (!state) {\r\n                return;\r\n            }\r\n            let value:any;\r\n            if (input.type === \"number\") {\r\n                value = input.value;\r\n                // try {\r\n                //     value = parseInt(input.value);\r\n                // } catch (e)\r\n                // {\r\n                //     return;\r\n                // }\r\n            }\r\n            else if (input.type === \"checkbox\" && input instanceof HTMLInputElement) {\r\n                value = input.checked;\r\n            }\r\n            else {\r\n                value = input.value;\r\n            }\r\n\r\n            // assign to specific field\r\n           \r\n            const name      = input.name;\r\n            let rawName     = name.split(\".\");\r\n            let obj         = state;\r\n            \r\n            rawName.forEach((key, index) => {\r\n                if (obj && index < rawName.length - 1) {\r\n                    obj = obj[key];\r\n                }\r\n                if ( index === rawName.length - 1 ) {\r\n                    obj[key] = value;\r\n                }\r\n            });\r\n            \r\n            // state[input.name] = value;\r\n            this.setState(state, () => {\r\n                if (id) {\r\n                    const el = document.getElementById(id);\r\n                    if (el) {\r\n                        el.focus();\r\n                    }\r\n                }\r\n                if (callback) {\r\n                    callback(value);\r\n                }\r\n            });\r\n        }\r\n        \r\n    }\r\n}","export default class BaseModel {\r\n    public id:number = -1;\r\n}","import { inject, injectable } from \"inversify\";\r\nimport User from \"../models/User\";\r\nimport Settings from './../settings';\r\nimport WebResponse from './../models/WebResponse';\r\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { removeLoginKeyCookie, setLoginKeyCookie, commonAuthorizedHeader, loginKeyCookieExist } from './../utils/restApiUtil';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport RestClient from './../apiClients/RestClient';\r\nimport RoutingService from './RoutingService';\r\n\r\n\r\nconst LOGIN_URL     = Settings.App.hosts.api + \"/login\";\r\nconst LOGOUT_URL    = Settings.App.hosts.api + \"/api/user/logout\";\r\nconst LOAD_USER_URL = Settings.App.hosts.api + \"/api/user\";\r\nconst LOAD_APP_URL  = Settings.App.hosts.api + \"/api/public/index\";\r\nconst UPDATE_PROFILE_URL  = Settings.App.hosts.api + \"/api/user/update\";\r\n\r\n@injectable()\r\nexport default class AuthService {\r\n     \r\n    private _loggedUser:User | undefined;\r\n    private _appProfile:ApplicationProfile | undefined;\r\n    private _onUserUpdate:Map<string, (user:User | undefined) =>any> = new Map();\r\n    private _onAppProfileUpdate:Map<string, (val:ApplicationProfile | undefined) =>any> = new Map();\r\n\r\n\r\n    @inject(RestClient)\r\n    private rest:RestClient;\r\n    @inject(RoutingService)\r\n    private routing:RoutingService;\r\n \r\n    get loggedIn() { return this._loggedUser !== undefined; }\r\n\r\n    get loggedUser() { \r\n        return this._loggedUser; \r\n    }\r\n    get isAdmin() { \r\n        let result = this.loggedIn && this.loggedUser?.hasAuthorityType('ROLE_SUPERADMIN') \r\n        return result;\r\n    }\r\n    get appProfile()\r\n    {\r\n        return this._appProfile;\r\n    }\r\n    \r\n    private set loggedUser(value:User | undefined) { \r\n        this._loggedUser = value; \r\n        this._onUserUpdate.forEach(action => action(value))\r\n    }\r\n    private set appProfile(value: ApplicationProfile | undefined) {\r\n        this._appProfile = value;\r\n        this._onAppProfileUpdate.forEach(action => action(value))\r\n    }\r\n\r\n    addOnUserUpdated = (key:string, action:(user:User|undefined) => any) => {\r\n        this._onUserUpdate.set(key, action);\r\n    }\r\n    removeOnUserUpdated = (key:string) => {\r\n        this._onUserUpdate.delete(key);\r\n    }\r\n    addOnAppProfileUpdated = (key:string, action:(val:ApplicationProfile|undefined) => any) => {\r\n        this._onAppProfileUpdate.set(key, action);\r\n    }\r\n    removeOnAppProfileUpdated = (key:string) => {\r\n        this._onAppProfileUpdate.delete(key);\r\n    }\r\n\r\n    loadApplication = () : Promise<ApplicationProfile> => {\r\n        \r\n        return new Promise<ApplicationProfile>((resolve, reject)=>{\r\n            \r\n            this.rest.getCommon<ApplicationProfile>(LOAD_APP_URL, {})\r\n                .then((response)=>{\r\n                    this.loadUser();\r\n                    this._appProfile = response;\r\n                    resolve(response);\r\n                })\r\n                .catch(reject);\r\n        })\r\n    }\r\n\r\n    loadUser = () => {\r\n        if (loginKeyCookieExist())\r\n        {\r\n            this.rest.getAuthorized<User>(LOAD_USER_URL)\r\n                .then((response:User) => {\r\n                    this.handleSuccessLogin(response)\r\n                })\r\n                .catch(console.error)\r\n        }\r\n    }\r\n\r\n    updateProfile = (user:User) : Promise<User> => {\r\n        return new Promise<User>((res, rej) => {\r\n            this.rest.putAuthorized<User>(UPDATE_PROFILE_URL, user)\r\n                .then(user => {\r\n                    this.handleSuccessLogin(user);\r\n                    res(user);\r\n                })\r\n                .catch(rej);\r\n        })\r\n             \r\n    }\r\n\r\n    login = (username: string, password: string): Promise<User> => {\r\n        \r\n        return new Promise<User>((resolve, reject) => {\r\n            \r\n            const formData = new FormData();\r\n            formData.append(\"username\", username);\r\n            formData.append(\"password\", password);\r\n            formData.append(\"transport_type\", \"rest\");\r\n            let parameters = [\r\n                \"username=\"+username,\r\n                \"password=\"+password,\r\n                \"transport_type=rest\"\r\n            ]\r\n            axios.post(LOGIN_URL, parameters.join(\"&\"), {\r\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n            }).then((response: AxiosResponse) => {\r\n\r\n                const responseJson:WebResponse<User>    = response.data;\r\n                const loginKey                          = response.headers['access-token'];\r\n                \r\n                this.handleSuccessLogin(responseJson.result, loginKey);\r\n                resolve(responseJson.result);\r\n            }).catch((err:AxiosError) =>{\r\n                reject(err.response?.data ?? new Error(err.message))\r\n            });\r\n        });\r\n    }\r\n\r\n    handleSuccessLogin = (user:User, loginKey?:string) => {\r\n        this.loggedUser = Object.assign(new User, user);\r\n        if (loginKey)\r\n        {\r\n            setLoginKeyCookie(loginKey);\r\n        }\r\n        if (this.routing.redirectedRoute)\r\n        {\r\n            this.routing.navigate(this.routing.redirectedRoute);\r\n        }\r\n    }\r\n\r\n    logout = () => {\r\n        this.loggedUser = undefined;\r\n        this.rest.postAuthorized(LOGOUT_URL, {}).then(response => {    \r\n            removeLoginKeyCookie();\r\n        }).catch(console.error);\r\n    }\r\n}","import axios, { AxiosError, AxiosResponse } from \"axios\";\nimport { inject, injectable } from \"inversify\";\nimport { commonAuthorizedHeader, setLoginKeyCookie } from \"../utils/restApiUtil\";\nimport LoadingService from './../services/LoadingService';\n\nconst SUCCESS_CODE = \"00\";\n\n@injectable()\nexport default class RestClient {\n    @inject(LoadingService)\n    private loading: LoadingService;\n\n    postAuthorized = <T>(url:string, body:any, contentType='application/json') : Promise<T> => {\n        return this.postCommon(url, body, commonAuthorizedHeader(contentType), true);\n    }\n    deleteAuthorized = <T>(url:string, contentType='application/json') : Promise<T> => {\n        return this.deleteCommon(url, commonAuthorizedHeader(contentType), true);\n    }\n    putAuthorized = <T>(url:string, body:any, contentType='application/json') : Promise<T> => {\n        return this.putCommon(url, body, commonAuthorizedHeader(contentType), true);\n    }\n    patchAuthorized = <T>(url:string, body:any, contentType='application/json') : Promise<T> => {\n        return this.patchCommon(url, body, commonAuthorizedHeader(contentType), true);\n    }\n    \n    startLoading = () => this.loading.startLoading();\n    stopLoading = () => this.loading.stopLoading();\n\n    postCommon = <T>(url:string, body:any, headers:any, expectRefreshToken = false) : Promise<T> => {\n        return new Promise<T>((resolve, reject) => {\n            this.startLoading();\n           \n            axios.post(url, body, {\n                headers: { ...headers }\n            }).then((response: AxiosResponse) => {\n                if (!response.data)\n                {\n                    reject(new Error(\"Invalid response data\"));\n                    return;\n                }\n                if (response.data.code !== SUCCESS_CODE) {\n                    reject(response.data);\n                    return;\n                }\n                if (expectRefreshToken)\n                {\n                    this.updateLoginKeyCookie(response);\n                }\n                resolve(response.data.result);\n            }).catch((err:AxiosError) =>{\n                reject(err.response?.data ?? new Error(err.message))\n            }).finally(this.stopLoading)\n        });\n    }\n\n    updateLoginKeyCookie = (response:AxiosResponse) => {\n        if (response.headers[\"access-token\"] && response.headers[\"access-token\"] !== \"\")\n        {\n            setLoginKeyCookie(response.headers['access-token']);\n        }\n    }\n    putCommon = <T>(url:string, body:any, headers:any, expectRefreshToken = false) : Promise<T> => {\n        return new Promise<T>((resolve, reject) => {\n            this.startLoading();\n            axios.put(url, body, {\n                headers: { ...headers }\n            }).then((response: AxiosResponse) => {\n                if (!response.data)\n                {\n                    reject(new Error(\"Invalid response data\"));\n                    return;\n                }\n                if (response.data.code !== SUCCESS_CODE) {\n                    reject(response.data);\n                    return;\n                }\n                if (expectRefreshToken)\n                {\n                    this.updateLoginKeyCookie(response);\n                }\n                resolve(response.data.result);\n            }).catch((err:AxiosError) =>{\n                reject(err.response?.data ?? new Error(err.message))\n            }).finally(this.stopLoading);\n        });\n    }\n    patchCommon = <T>(url:string, body:any, headers:any, expectRefreshToken = false) : Promise<T> => {\n        return new Promise<T>((resolve, reject) => {\n            this.startLoading();\n            axios.patch(url, body, {\n                headers: { ...headers }\n            }).then((response: AxiosResponse) => {\n                if (!response.data)\n                {\n                    reject(new Error(\"Invalid response data\"));\n                    return;\n                }\n                if (response.data.code !== SUCCESS_CODE) {\n                    reject(response.data);\n                    return;\n                }\n                if (expectRefreshToken)\n                {\n                    this.updateLoginKeyCookie(response);\n                }\n                resolve(response.data.result);\n            }).catch((err:AxiosError) =>{\n                reject(err.response?.data ?? new Error(err.message))\n            })\n            .finally(this.stopLoading);\n        });\n    }\n    private deleteCommon = <T>(url:string, headers:any, expectRefreshToken = false) : Promise<T> => {\n        return new Promise<T>((resolve, reject) => {\n            \n            this.startLoading();\n            axios.delete(url,{\n                headers: { ...headers }\n            }).then((response: AxiosResponse) => {\n                if (!response.data)\n                {\n                    reject(new Error(\"Invalid response data\"));\n                    return;\n                }\n                if (response.data.code !== SUCCESS_CODE) {\n                    reject(response.data);\n                    return;\n                }\n                if (expectRefreshToken)\n                {\n                    this.updateLoginKeyCookie(response);\n                }\n                resolve(response.data.result);\n            }).catch((err:AxiosError) =>{\n                reject(err.response?.data ?? new Error(err.message))\n            })\n            .finally(this.stopLoading);\n        });\n    }\n\n    getAuthorized = <T>(url:string) : Promise<T> => {\n        return this.getCommon(url, commonAuthorizedHeader(), true);\n    }\n    getCommon = <T>(url:string, headers:any, expectRefreshToken = false) : Promise<T> => {\n        return new Promise<T>((resolve, reject)=>{\n            this.startLoading();\n            axios.get(url, { headers: {\n                ...headers\n            } })\n                .then((response:AxiosResponse)=>{\n                    if (!response.data) {\n                        reject(new Error(\"Invalid response data\"));\n                        return;\n                    }\n                    if (response.data.code !== SUCCESS_CODE) {\n                        reject(response.data);\n                        return;\n                    }\n                    if (expectRefreshToken)\n                    {\n                        this.updateLoginKeyCookie(response);\n                    }\n                    resolve(response.data.result);\n                })\n                .catch((err:AxiosError)=>{\n                    reject(err.response?.data ?? new Error(err.message))\n                })\n                .finally(this.stopLoading);\n        })\n    }\n}","import { injectable } from \"inversify\";\nimport ToastComponent from './../interfaces/ToastComponent';\nimport ToastMode from './../constants/ToastMode';\n\n@injectable()\nexport default class ToastService {\n    private component: ToastComponent | undefined;\n    setComponent = (c: ToastComponent) => {\n        this.component = c;\n    }\n    showInfo(message:string, duration = 5000) {\n        this.show(message, 'info', duration);\n    }\n    showPrimary(message:string, duration = 5000) {\n        this.show(message, 'primary', duration);\n    }\n    showWarning(message:string, duration = 5000) {\n        this.show(message, 'warning', duration);\n    }\n    showDanger(message:string, duration = 5000) {\n        this.show(message, 'danger', duration);\n    }\n    showSuccess(message:string, duration = 5000) {\n        this.show(message, 'success', duration);\n    }\n    show = (message:string, mode:ToastMode, duration = 5000) => {\n        this.component?.show(message, mode, duration);\n    }\n}","import React, { ChangeEvent, FormEvent, ReactNode } from \"react\";\r\nimport ControlledComponent from \"../../pages/ControlledComponent\";\r\n\r\nclass State  {\r\n    content:string = \"\";\r\n}\r\ninterface Props  {\r\n    message:string,\r\n    defaultValue?:string,\r\n    onSubmit:(val:string)=>any\r\n}\r\nexport default class DialogPrompt extends ControlledComponent<Props, State> {\r\n    state: State = new State();\r\n    inputRef: React.RefObject<HTMLInputElement> = React.createRef();\r\n\r\n    constructor(props:Props)\r\n    {\r\n        super(props);\r\n        if (props.defaultValue)\r\n        {\r\n            this.state.content = props.defaultValue;\r\n        }\r\n    }\r\n\r\n    onSubmit = (e:FormEvent) => {\r\n        e.preventDefault();\r\n        this.props.onSubmit(this.state.content);\r\n    }\r\n    componentDidMount()\r\n    {\r\n        if (this.inputRef.current)\r\n        {\r\n            this.inputRef.current.focus();\r\n        }\r\n    }\r\n    render(): ReactNode {\r\n        \r\n        return (\r\n            <div>\r\n                <h5>{this.props.message}</h5>\r\n                <form onSubmit={this.onSubmit}>\r\n                    <input \r\n                        ref={this.inputRef}\r\n                        name=\"content\"\r\n                        value={this.state.content}\r\n                        onChange={this.handleInputChange}\r\n                        className=\"form-control mb-3\" required />\r\n                    <input \r\n                        type=\"submit\" \r\n                        className=\"btn btn-primary\" \r\n                        value={\"Ok\"} />\r\n                    \r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}","import { injectable } from \"inversify\";\r\nimport { Component, createElement, ReactElement } from \"react\";\r\nimport \"reflect-metadata\";\r\nimport { DialogObserver as DialogObserver } from \"../components/dialog/DialogObserver\";\r\nimport DialogContainer from \"../components/dialog/DialogContainer\";\r\nimport DialogPrompt from \"../components/dialog/DialogPrompt\";\r\nimport { DialogType } from \"../constants/DialogType\";\r\nimport { invokeLater } from \"../utils/eventUtil\";\r\n\r\n// ms\r\nconst INVOCATION_WAIT_DELAY = 500;\r\n\r\n@injectable()\r\nexport default class DialogService {\r\n  private container: DialogContainer;\r\n  public setContainer = (container: DialogContainer) => {\r\n    this.container = container;\r\n  }\r\n  public showInfo = (title: string, message: string) => {\r\n    if (this.container.isShown) {\r\n      invokeLater(() => {\r\n        this.showInfo(title, message)\r\n      }, INVOCATION_WAIT_DELAY);\r\n      return;\r\n    }\r\n    this.container.show(\r\n      DialogType.INFO,\r\n      title,\r\n      message,\r\n      true,\r\n      console.info\r\n    );\r\n  }\r\n  public showWarning = (title: string, message: string) => {\r\n    if (this.container.isShown) {\r\n      invokeLater(() => {\r\n        this.showWarning(title, message)\r\n      }, INVOCATION_WAIT_DELAY);\r\n      return;\r\n    }\r\n    this.container.show(\r\n      DialogType.WARNING,\r\n      title,\r\n      message,\r\n      true,\r\n      console.info\r\n    );\r\n  }\r\n  public showError = (title: string, message: string | Error) => {\r\n    if (this.container.isShown) {\r\n      invokeLater(() => {\r\n        this.showError(title, message)\r\n      }, INVOCATION_WAIT_DELAY);\r\n      return;\r\n    }\r\n    let messageContent;\r\n    if (message instanceof Error) {\r\n      messageContent = message.message;\r\n    } else {\r\n      if (typeof message === 'string' && message.trim().toLowerCase().startsWith(\"<!doctype html\")) {\r\n        messageContent = (\r\n          <div dangerouslySetInnerHTML={{\r\n            __html: message\r\n          }}>\r\n\r\n          </div>\r\n        )\r\n      } if (typeof message === 'object') {\r\n        messageContent = message['result'];\r\n      } else {\r\n        messageContent = !message || message.trim() === \"\" ? \"Unexpected error\" : message.trim();\r\n      }\r\n    }\r\n    this.container.show(\r\n      DialogType.ERROR,\r\n      title,\r\n      messageContent,\r\n      true,\r\n      () => { },\r\n      () => { },\r\n      \"Ok\"\r\n    );\r\n\r\n  }\r\n\r\n  public showConfirmDanger = (title: string, message: string) => {\r\n    return this.showConfirm(title, message, DialogType.ERROR);\r\n  }\r\n  public showConfirmWarning = (title: string, message: string) => {\r\n    return this.showConfirm(title, message, DialogType.WARNING);\r\n  }\r\n\r\n  public showConfirm = (title: string, message: string, type: DialogType = DialogType.INFO) => {\r\n\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      if (this.container.isShown) {\r\n        invokeLater(() => {\r\n          this.container.show(\r\n            type,\r\n            title,\r\n            message,\r\n            false,\r\n            (e: any) => {\r\n              resolve(true);\r\n            },\r\n            (e: any) => {\r\n              resolve(false);\r\n            }\r\n          );\r\n        }, INVOCATION_WAIT_DELAY);\r\n        return;\r\n      }\r\n      this.container.show(\r\n        type,\r\n        title,\r\n        message,\r\n        false,\r\n        (e: any) => {\r\n          resolve(true);\r\n        },\r\n        (e: any) => {\r\n          resolve(false);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  public showPrompt = (title: string, message: string, defaultValue?: string) => {\r\n\r\n    return new Promise<string | undefined>((resolve, reject) => {\r\n      this.doShowPrompt(title, message, resolve, defaultValue);\r\n    });\r\n  }\r\n\r\n  private doShowPrompt = (title: string, message: string, resolve: (e: any) => any, defaultValue?: string) => {\r\n    if (this.container.isShown) {\r\n      invokeLater(() => {\r\n        this.doShowPrompt(title, message, resolve, defaultValue);\r\n      }, INVOCATION_WAIT_DELAY);\r\n      return;\r\n    }\r\n    const onSubmit = (val: string) => {\r\n      this.dismissAlert();\r\n      resolve(val);\r\n    };\r\n    this.container.showNoButtons(\r\n      title,\r\n      <DialogPrompt\r\n        message={message}\r\n        onSubmit={onSubmit}\r\n        defaultValue={defaultValue} />,\r\n      (e: any) => { resolve(undefined) },\r\n    );\r\n  }\r\n\r\n  public dismissAlert = () => {\r\n    this.container.dismissAlert();\r\n  }\r\n\r\n  public showContent = (title: string, content: ReactElement<any, typeof Component>, observer?: DialogObserver) => {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      if (!observer) {\r\n        observer = { close(){ } };\r\n      }\r\n      let el = createElement(content.type, { ...content.props, dialogObserver: observer });\r\n      this.container.showNoButtons(title, el, (e: any) => { resolve(false) }, observer);\r\n    });\r\n  }\r\n}","\nexport const removeCookie = (cname:string) => {\n    setCookie(cname, null, 0);\n}\n \nexport const setCookie = function (cname:string, cvalue:string | null, exdays=1) {\n    var d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    var expires = \"expires=\" + d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\nexport const getCookie = function (cname:string) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) === 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}","\nimport { getCookie, setCookie, removeCookie } from './cookieUtil';\nconst LOGIN_KEY_NAME = \"kado-in-login-token\"\n\nexport const commonAuthorizedHeader = (contentType:string = 'application/json') => {\n    return {\n        'Content-Type': contentType,\n        'requestId': \"ABCD\",// getRequestId(),//'localStorage.getItem(\"requestId\")',\n        'Authorization': 'Bearer '+getCookie(LOGIN_KEY_NAME)\n    }\n};\nexport const commonHeader = (contentType:string = 'application/json') => {\n    return {\n        'Content-Type': contentType,\n        // 'requestId': getRequestId(), \n    }\n};\nexport const removeLoginKeyCookie = () => {\n    removeCookie(LOGIN_KEY_NAME);\n}\nexport const setLoginKeyCookie =  (token:string) => {\n    setCookie(LOGIN_KEY_NAME, token);\n}\nexport const loginKeyCookieExist = () => {\n    const val:string = getLoginKeyCookie();\n    return val !== undefined && val !== null && val.trim() !== \"\";\n}\nexport const getLoginKeyCookie = () => {\n    return getCookie(LOGIN_KEY_NAME);\n}\n","\r\nimport AuthorityType from '../constants/AuthorityType';\r\nimport BaseModel from './BaseModel';\r\nexport default class User extends BaseModel {\r\n    username: string;\r\n    displayName: string;\r\n    fullName: string;\r\n    phoneNumber: string;\r\n    email: string;\r\n    editPassword: string;\r\n    authorities: Authority[];\r\n\r\n    hasAuthorityType = (type:AuthorityType | AuthorityType[]) => {\r\n        if (this.authorities)\r\n        {\r\n            for (let i = 0; i < this.authorities.length; i++) {\r\n                const userAuthType = this.authorities[i];\r\n                if (typeof type === 'string') {\r\n                    if (userAuthType.name === type) {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    for (let t = 0; t < type.length; t++) {\r\n                        const item = type[t];\r\n                        if (item === userAuthType.name) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    birthDate: string;\r\n    birthPlace: string;\r\n    gender: 'MALE' | 'FEMALE' = 'MALE';\r\n\r\n}\r\n\r\nclass Authority {\r\n    name: AuthorityType;\r\n}","import { inject, injectable } from \"inversify\";\nimport ModelNames from \"../constants/ModelNames\";\nimport BaseModel from \"../models/BaseModel\";\nimport MasterDataResult from \"../models/MasterDataResult\";\nimport RestClient from './../apiClients/RestClient';\nimport Settings from './../settings';\n\n\nconst API_URL = Settings.App.hosts.api +\"/api/admin/management/\";\n\n@injectable()\nexport default class MasterDataService {\n    @inject(RestClient)\n    private rest:RestClient;\n    \n    get = <T extends BaseModel>(name: ModelNames, id:number): Promise<T> => {\n        \n        const url = `${API_URL}${name}/${id}`;\n        return this.rest.getAuthorized(url);\n    }\n    post = <T extends BaseModel>(name: ModelNames, model:T): Promise<T> => {\n\n        const url = `${API_URL}${name}`;\n        return this.rest.postAuthorized(url, model);\n    }\n    put = <T extends BaseModel>(name: ModelNames, id:number, model:T): Promise<T> => {\n\n        const url = `${API_URL}${name}/${id}`;\n        return this.rest.putAuthorized(url, model);\n    }\n    patchAction = <T extends BaseModel>(name: ModelNames, id:number, action:string): Promise<T> => {\n\n        const url = `${API_URL}${name}/${id}?action=${action}`;\n        return this.rest.patchAuthorized(url, {});\n    }\n    delete = <T extends BaseModel>(name: ModelNames, id:number): Promise<T> => {\n\n        const url = `${API_URL}${name}/${id}`;\n        return this.rest.deleteAuthorized(url);\n    }\n    list = <T extends BaseModel>(\n        name: ModelNames, \n        page:number, \n        perPage:number,\n        order:string|undefined = 'id',\n        orderDesc?:boolean,\n        filter?:string[] | string,\n        fieldPaths?:string[] | string,\n        displayFieldAliases?:string[] | string\n    ): Promise<MasterDataResult<T>> => {\n        let orderString = '';\n        if (order)\n        {\n            orderString = '&order='+order;\n            if (orderDesc === true)\n            {\n                orderString += '&orderDesc=true'\n            }\n        }\n        const url = `${API_URL}${name}?` +\n                    `page=${page}&` +\n                    `limit=${perPage}` + \n                    orderString +\n                    (filter? filterToQuery(filter) : '' ) +\n                    (fieldPaths? fieldPathsQuery(fieldPaths) : '') +\n                    (displayFieldAliases? displayAliasesToQuery(displayFieldAliases) : '');\n        return this.rest.getAuthorized(url);\n    }\n}\nconst displayAliasesToQuery = (displayFieldAliases?: string[] | string) => {\n    return toQueryParam('displayFieldAliases', displayFieldAliases);\n}\nconst fieldPathsQuery = (fieldPaths?: string[] | string) => {\n    return toQueryParam('fieldPaths', fieldPaths);\n}\nconst filterToQuery = (filter?: string[] | string) => {\n    return toQueryParam('filter', filter);\n}\nconst toQueryParam = (key:string, params?: string[] | string) => {\n    if (!params || params.length == 0) {\n        return '';\n    }\n    if (typeof params === 'string') {\n        return `&${key}=${params}`;\n    }\n    const filters = [];\n    for (let i = 0; i < params.length; i++) {\n        const element = params[i];\n        filters.push(`${key}=${element}`);\n    }\n    return '&' + filters.join('&');\n}\n","import { injectable } from \"inversify\";\nimport LoadingComponent from './../interfaces/LoadingComponent';\n\n@injectable()\nexport default class LoadingService {\n    startLoading = () => {\n        this.component?.startLoading();\n    }\n    stopLoading = () => {\n        this.component?.stopLoading();\n    }\n    private component: LoadingComponent | undefined;\n\n    setComponent = (c: LoadingComponent) => {\n        this.component = c;\n    }\n}","import { inject, injectable } from \"inversify\";\nimport ClassLevel from \"../models/ClassLevel\";\nimport Settings from \"../settings\";\nimport RestClient from './../apiClients/RestClient';\nimport ClassMember from './../models/ClassMember';\n\nconst API_URL = Settings.App.hosts.api +\"/api/admin/management/\";\n\n@injectable()\nexport default class ClassMemberService {\n    @inject(RestClient)\n    private rest: RestClient;\n\n    getMembers = (classLevelId: number) => {\n        return this.rest.getAuthorized<ClassMember[]>(`${API_URL}classlevels/${classLevelId}/members`);\n    }\n    getActiveClasses = () => {\n        const URL_GET_ACTIVE_CLASSES = `${API_URL}classlevels/active`;\n        return this.rest.getAuthorized<ClassLevel[]>(URL_GET_ACTIVE_CLASSES);\n    }\n}","import { inject, injectable } from \"inversify\";\nimport RestClient from '../apiClients/RestClient';\nimport Settings from \"../settings\";\nimport SchoolConfig from './../models/SchoolConfig';\n\nconst API_URL = Settings.App.hosts.api +\"/api/admin/management/\";\n\n@injectable()\nexport default class SchoolConfigService {\n    @inject(RestClient)\n    private rest: RestClient;\n\n    getConfig = (schoolId: number) => {\n        return this.rest.getAuthorized<SchoolConfig>(`${API_URL}schools-config/school/${schoolId}`);\n    }\n    update = (config: SchoolConfig) => {\n        return this.rest.putAuthorized<SchoolConfig>(`${API_URL}schools-config/${config.id}`, config);\n    }\n}","import { inject, injectable } from \"inversify\";\nimport RestClient from \"../apiClients/RestClient\";\nimport Employee from \"../models/Employee\";\nimport Settings from \"../settings\";\nimport WebResponse from './../models/WebResponse';\n\nconst API_URL = Settings.App.hosts.api +\"/api/admin/management/uploads/\";\n\n@injectable()\nexport default class FileUploadService {\n    @inject(RestClient)\n    private rest:RestClient;\n    \n    uploadSignature = (employee: Employee, file: File) => {\n        const url = `${API_URL}employee/signature`;\n        const formData = new FormData();\n        formData.append('id', employee.id.toString());\n        formData.append('file', file);\n        return this.rest.postAuthorized<WebResponse<string>>(url, formData);\n    }\n}","import { injectable } from \"inversify\";\n\n@injectable()\nexport default class EventService {\n    // private _onProductSearchKeyUpdate:Map<string, (key:string) => any> = new Map();\n\n    // triggerProductSearchUpdate = (key:string) => {\n    //     this._onProductSearchKeyUpdate.forEach(action => action(key));\n    // }\n\n    // addOnProductSearchUpdate = (key:string, action:(key:string)=>any) => {\n    //     this._onProductSearchKeyUpdate.set(key, action);\n    // }\n    // removeOnProductSearchUpdate = (key:string) => {\n    //     this._onProductSearchKeyUpdate.delete(key);\n    // }\n}","import { Container } from 'inversify';\r\nimport 'reflect-metadata';\r\nimport RestClient from './apiClients/RestClient';\r\nimport AuthService from './services/AuthService';\r\nimport ClassMemberService from './services/ClassMemberService';\r\nimport DialogService from './services/DialogService';\r\nimport EventService from './services/EventService';\r\nimport FileUploadService from './services/FileUploadService';\r\nimport LoadingService from './services/LoadingService';\r\nimport MasterDataService from './services/MasterDataService';\r\nimport RoutingService from './services/RoutingService';\r\nimport SchoolConfigService from './services/SchoolConfigService';\r\nimport ToastService from './services/ToastService';\r\n\r\nlet container:Container = new Container();\r\n\r\ncontainer.bind(EventService).toSelf().inSingletonScope();\r\ncontainer.bind(RestClient).toSelf().inSingletonScope();\r\ncontainer.bind(AuthService).toSelf().inSingletonScope();\r\ncontainer.bind(MasterDataService).toSelf().inSingletonScope();\r\ncontainer.bind(RoutingService).toSelf().inSingletonScope();\r\ncontainer.bind(ClassMemberService).toSelf().inSingletonScope();\r\ncontainer.bind(FileUploadService).toSelf().inSingletonScope();\r\ncontainer.bind(SchoolConfigService).toSelf().inSingletonScope();\r\n\r\n// dialogs\r\ncontainer.bind(DialogService).toSelf().inSingletonScope();\r\ncontainer.bind(LoadingService).toSelf().inSingletonScope();\r\ncontainer.bind(ToastService).toSelf().inSingletonScope();\r\n\r\nexport { container };\r\n\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","\r\ninterface Props {\r\n    show?: boolean;\r\n    iconClass?: string;\r\n    children?: any;\r\n    className?: string;\r\n    onClick?: (e: any) => any;\r\n    disabled?: boolean;\r\n    type?: 'button' | 'submit' | 'reset';\r\n}\r\nconst ActionButton = (props: Props) => {\r\n    if (props.show !== undefined && props.show === false) {\r\n        return null;\r\n    }\r\n    const disabledProps: any = props.disabled === true ? { disabled: 'disabled' } : {};\r\n    return (\r\n        <button type={props.type ?? \"button\"} className={props.className} onClick={props.onClick} {...disabledProps}>\r\n            {props.iconClass ?\r\n                <i className={props.iconClass + (props.children ? \" me-3\" : \"\")} /> : null}\r\n            {props.children}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ActionButton;","\r\nimport { resolve } from \"inversify-react\";\r\nimport React, { Component } from \"react\";\r\nimport ActionButton from \"../components/buttons/ActionButton\";\r\nimport RoutingService from './../services/RoutingService';\r\n\r\nclass Props {\r\n    children:any;\r\n    title?:string;\r\n    attributes?:any;\r\n    titleAlign?:undefined |'center' | 'left' | 'right';\r\n    back?:string;\r\n}\r\nexport class ViewTemplate extends Component<Props, any> {\r\n    @resolve(RoutingService)\r\n    private routing:RoutingService;\r\n    goBack = () => {\r\n        if (this.props.back)\r\n        {\r\n            this.routing.navigate(this.props.back);\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        \r\n        return (\r\n            <div  {...this.props.attributes} className=\"container-fluid baseView\" >\r\n                {this.props.title && this.props.title.trim() !== \"\" ? \r\n                    <h2 style={{textAlign: this.props.titleAlign}}>{this.props.title}</h2> : null}\r\n                {this.props.back?\r\n                <ActionButton onClick={this.goBack} className=\"btn btn-dark btn-sm my-2\" iconClass=\"fas fa-arrow-left\">\r\n                    Back\r\n                </ActionButton> : null}\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}","export default class BaseState {\r\n    error:Error|undefined;\r\n    message:string|undefined;\r\n    busy:boolean = false;\r\n}","\r\nimport BaseModel from './BaseModel';\r\nexport default class MasterDataResult<T extends BaseModel> {\r\n    totalData: number = 0;\r\n    page: number = 0;\r\n    limit: number = 10;\r\n    items: T[] = [];\r\n    order?: string = \"id\";\r\n    orderDesc?: boolean;\r\n}","import BaseModel from \"./BaseModel\";\nimport BaseState from \"./BaseState\";\nimport MasterDataResult from './MasterDataResult';\n\nexport default class BaseMasterDataState<T extends BaseModel> extends BaseState {\n    result:MasterDataResult<T> = new MasterDataResult<T>();\n    item:T | undefined;\n    showForm:boolean = false;\n    filter: any = {};\n}","\nexport default class DataTableHeaderValue {\n    label:string | null | undefined;\n    constructor(public name:string | null, label?:string | null , public orderable = true, public filterable = true){\n        this.label = label ?? name;\n        this.filterable = this.orderable ? filterable : false;\n        this.adjustLabel();\n    }\n\n    adjustLabel = () => {\n        if (!this.label) return;\n\n        if (this.label.includes(\".\")) {\n            const splitByDot = this.label.split(\".\");\n            this.label = splitByDot[splitByDot.length-1];\n        }\n\n        this.label = capitalize(this.label);\n    }\n}\n\nconst capitalize = (val:string) => {\n    return val[0].toUpperCase() + val.substring(1, val.length);\n}","import BaseModel from \"./BaseModel\";\r\nimport School from \"./School\";\r\nimport User from \"./User\";\r\n\r\nexport default class Employee extends BaseModel {\r\n    nisdm: string; \r\n    profileImage: string; \r\n    user: User = new User();\r\n \r\n    noKk: string; \r\n    noKtp: string; \r\n    addressKtp: string; \r\n    addressOther: string;\r\n \r\n    motherName: string; \r\n    fatherName: string;\r\n \r\n    npwp: string; \r\n    bankAccountNumber: string;\r\n \r\n\teducations: Education[] = [];\r\n\tschools: School[] = [];\r\n \r\n    photoScan: string; \r\n    kkScan: string; \r\n    npwpScan: string; \r\n    bankAccountScan: string;\r\n\r\n    signatureFile: string;\r\n\r\n    active: boolean;\r\n\r\n    removeEducation = (id:number) => { \r\n        for (let i = 0; i < this.educations.length; i++) {\r\n            const element = this.educations[i];\r\n            if (element.id === id)\r\n            {\r\n                this.educations.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    addSchool = (school:School) => {\r\n        for (let i = 0; i < this.schools.length; i++) {\r\n            const element = this.schools[i];\r\n            if (element.id === school.id)\r\n            {\r\n                console.warn(\"duplicate school id: \" + school.id);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this.schools.push(school);\r\n        return true;\r\n    }\r\n    removeSchool = (id:number) => { \r\n        for (let i = 0; i < this.schools.length; i++) {\r\n            const element = this.schools[i];\r\n            if (element.id === id)\r\n            {\r\n                this.schools.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class Education  extends BaseModel {\r\n    type: string = \"S1\"; \r\n    name: string; \r\n    major: string;\r\n    title: string;\r\n    certificateScan: string;\r\n}","import React from \"react\"\r\nimport { NavigateFunction, Params, useNavigate, useParams } from \"react-router-dom\"\r\nimport { container } from \"../inversify.config\";\r\nimport RoutingService from './../services/RoutingService';\r\n\r\nexport function commonWrapper(Component: any) {\r\n    \r\n    return (props: any) => {\r\n        const routeParams: Params<string>   = useParams();\r\n        const doNavigate: NavigateFunction  = useNavigate();\r\n        const navigate: (url:string)=> void = (url:string) : void => {\r\n            \r\n            let routingService:RoutingService = container.get(RoutingService);\r\n            doNavigate(url);\r\n            routingService.updateRoute(url);\r\n        };\r\n        return <Component navigate={navigate} routeParams={routeParams} {...props} />\r\n    }\r\n}","export const randomString = (length:number)=> {\r\n    var result           = '';\r\n    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var charactersLength = characters.length;\r\n    for ( var i = 0; i < length; i++ ) {\r\n      result += characters.charAt(Math.floor(Math.random() *  charactersLength));\r\n   }\r\n   return result;\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n   const year = date.getFullYear();\r\n\r\n   const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n   return arr.join(\"-\");\r\n}\r\nexport const twoDigits = (value:number) :string => {\r\n   if (value >= 10) {\r\n       return   value.toString();\r\n   }\r\n   return \"0\"+value;\r\n}\r\n","import React from \"react\";\r\nimport { resolve } from \"inversify-react\";\r\nimport BaseProps from \"../models/BaseProps\";\r\nimport BaseState from \"../models/BaseState\"; \r\nimport ControlledComponent from \"./ControlledComponent\";\r\nimport Settings from './../settings';\r\nimport DialogService from './../services/DialogService';\r\nimport { ViewTemplate } from \"../layout/ViewTemplate\";\r\nimport AuthService from './../services/AuthService';\r\nimport ToastService from './../services/ToastService';\r\n\r\nexport abstract class BasePage<P extends BaseProps,S extends BaseState> extends ControlledComponent<P, S> {\r\n    title?:string;\r\n    @resolve(AuthService)\r\n    protected authService:AuthService;\r\n    @resolve(DialogService)\r\n    protected dialog:DialogService;\r\n    @resolve(ToastService)\r\n    protected toast:ToastService;\r\n\r\n    constructor(props:P, private authorized:boolean = false, title?:string)\r\n    {\r\n        super(props);\r\n        this.title = title;\r\n        this.initialize();\r\n    }\r\n    initialize = () => {\r\n        document.title = this.title ? this.title : Settings.App.uiSetting.defaultTitle;\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n        this.forceUpdate();\r\n    }\r\n\r\n    componentDidUpdate()\r\n    {\r\n        if (this.authorized && !this.authService.loggedIn )\r\n        {   \r\n            this.navigate(\"/\");\r\n            return;\r\n        }\r\n    }\r\n\r\n    protected navigate = (url:string) =>\r\n    {\r\n        if (this.props.navigate)\r\n        {\r\n            this.props.navigate(url);\r\n            return;\r\n        }\r\n        console.error(\"props.navigate does not exist\");\r\n    }\r\n\r\n    protected gotoHomePage = () => {\r\n        this.navigate(\"/\");\r\n    }\r\n\r\n    \r\n    protected invalidSession = () => \r\n    {\r\n        return (\r\n            <ViewTemplate title=\"Invalid Session\">\r\n                <p>You must log in to access this page</p>\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n    \r\n}\r\n \r\n","import { Link } from 'react-router-dom';\n\ninterface Props  {\n    show?:boolean;\n    iconClass?:string;\n    children?:any;\n    className?:string;\n    onClick?:(e:any)=>any;\n    to?:string;\n}\nconst AnchorButton = (props:Props) => {\n    if (props.show !== undefined && props.show === false)\n    {\n        return null;\n    }\n    if (!props.to)\n    {\n        return (\n            <a className={props.className} onClick={props.onClick}>\n                {props.iconClass?\n                <i className={props.iconClass+ (props.children? \" me-3\" : \"\")}/> : null }\n                {props.children}\n            </a>\n        )\n    }\n    return (\n        <Link to={props.to} className={props.className} onClick={props.onClick}>\n            {props.iconClass?\n            <i className={props.iconClass+ (props.children? \" me-3\" : \"\")}/> : null }\n            {props.children}\n        </Link>\n    )\n\n}\n\nexport default AnchorButton;","\nimport React, { Component } from 'react';\nimport { randomString } from './../../utils/stringUtil';\ninterface IProps {\n    limit: number,\n    totalData: number,\n    activePage: number,\n    onClick: any\n}\nexport default class PaginationButtons extends Component<IProps, any> {\n    constructor(props: IProps) {\n        super(props);\n    }\n    render() {\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\n        if (buttonIndexes.length === 0) { return null }\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\n        return (<div>\n            <nav aria-label=\"Page navigation example\">\n                <ul className=\"pagination\">\n                    <li className=\"page-item\"><a className=\"page-link clickable\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\n                    {buttonIndexes.map((page, i) => {\n                        return (\n                        <li key={\"NAV-\"+randomString(10)} className={\"page-item \"+(page-1 === this.props.activePage?\"active\":\"\")}>\n                            <a className=\"page-link clickable\" onClick={(e) => this.props.onClick(page - 1)} >{page}</a>\n                        </li>\n                        )\n                    })}\n                    <li className=\"page-item\"><a className=\"page-link clickable\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\n                </ul>\n            </nav>\n        </div>)\n    }\n}\n\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\n\n    /* DISPLAYED BUTTONS */\n    const displayed_buttons: number[] = [];\n    const buttonCount = Math.ceil(totalData / limit);\n\n    // console.debug(\"current page:\", currentPage);\n    const min = (currentPage) - 1;\n    const max = (currentPage) + 3;\n    // const min = (currentPage) - 2;\n    // const max = (currentPage) + 2;\n\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\n    if (buttonCount > 1) {\n        displayed_buttons.push(1);\n    }\n    for (let i = min; i <= max; i++) {\n        if (i > 1 && i <= buttonCount) {\n            (displayed_buttons.push(i));\n        }\n    }\n    if (max < buttonCount) {\n        displayed_buttons.push(buttonCount);\n    }\n    return displayed_buttons;\n}\n","import { ChangeEvent } from \"react\";\nimport DataTableHeaderValue from \"../../models/DataTableHeaderValue\";\nimport { randomString } from \"../../utils/stringUtil\";\nimport './DataTableHeader.scss';\n\nconst DataTableHeader = (\n    items:DataTableHeaderValue[], \n    activeOrder:string, \n    orderDesc:boolean, \n    onClick:(name:string, desc:boolean)=>any,\n    filter: any,\n    onChange: (name:string, value:string)=>any,\n) => {\n\n    return items.map(item => {\n        let className = activeOrder === item.name ? \"text-center bg-light\" : \"text-center\";\n        let textColor = activeOrder === item.name ? \"text-dark\":\"text-secondary\";\n        let tdOnClick = (e:any) => {\n            if (item.orderable && item.name) {\n                onClick(item.name, !orderDesc);\n            }\n        }\n        const _onChange = (e:ChangeEvent) => {\n            if (!item.name) {\n                return;\n            }\n            const input = e.target as HTMLInputElement;\n            onChange(item.name, input.value);\n        }\n        const isActive = activeOrder === item.name;\n        return (\n            <th key={\"th-item-\"+randomString(3)} className={className}>\n                {item.orderable ?\n                <button type=\"button\" className={`sortButton mb-1 btn btn-text w-100 ${textColor}`} onClick={tdOnClick} >\n                    <b className=\"text-start w-100\">{item.label}</b>\n                    {isActive ?\n                    <i className={`fas ${orderDesc ? 'fa-long-arrow-alt-down' : 'fa-long-arrow-alt-up'} ms-2`} /> :\n                    <i className=\"fas fa-sort ms-2\" />}\n                </button> : <span className=\"text-secondary\">{item.label}</span>}\n                {item.filterable && item.name?\n                <input id={`input-filter-${item.name}`} className=\"form-control form-control-sm\" value={filter[item.name] ?? \"\"} onChange={_onChange} /> : \n                null}\n            </th>\n        )\n    })\n}\n\nexport default DataTableHeader;\n\n","import { resolve } from \"inversify-react\";\r\nimport BaseModel from \"../../../models/BaseModel\";\r\nimport { BasePage } from \"../../BasePage\";\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport { ChangeEvent, FormEvent, Fragment, useState } from \"react\";\r\nimport AnchorButton from \"../../../components/buttons/AnchorButton\";\r\nimport PaginationButtons from \"../../../components/buttons/PaginationButtons\";\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport { randomString } from \"../../../utils/stringUtil\";\r\nimport ModelNames from \"../../../constants/ModelNames\";\r\nimport './MasterDataPage.scss';\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport DataTableHeader from \"../../../components/dataTableHeader/DataTableHeader\";\r\n\r\n\r\nabstract class BaseMasterDataPage<M extends BaseModel, P extends BaseProps, S extends BaseMasterDataState<M>> extends BasePage<P, S> {\r\n    @resolve(MasterDataService)\r\n    protected service: MasterDataService;\r\n\r\n    constructor(props: P, private name: ModelNames, title: string) {\r\n        super(props, true, title);\r\n    }\r\n    abstract get defaultItem(): M;\r\n\r\n    get item(): M | undefined { return this.state.item as M | undefined }\r\n    get activeOrder() { return this.state.result.order ?? \"id\" }\r\n    get isOrderDesc() { return this.state.result.orderDesc === true }\r\n    get startingNumber() { return 1 + (this.state.result.page * this.state.result.limit); }\r\n    get filterParams() {\r\n        const { filter } = this.state;\r\n        const array: string[] = [];\r\n        for (const key in filter) {\r\n            array.push(`${key}:${filter[key]}`);\r\n        }\r\n        return array;\r\n    }\r\n\r\n    abstract getDataTableHeaderVals(): DataTableHeaderValue[];\r\n\r\n    load = (page: number = 0, perPage: number = 10, order?: string, orderDesc?: boolean) => {\r\n        this.service.list<M>(this.name, page, perPage, order, orderDesc, this.filterParams)\r\n            .then(response => {\r\n                const assignedItems: M[] = [];\r\n                response.items.forEach(item => {\r\n                    assignedItems.push(Object.assign(this.defaultItem, item));\r\n                })\r\n                response.items = assignedItems;\r\n                this.setState({ result: response })\r\n            })\r\n            .catch(console.error);\r\n    }\r\n    componentDidMount(): void {\r\n        this.load();\r\n    }\r\n    onFormSubmit = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        const item = this.state.item as M | undefined;\r\n        if (!item) {\r\n            this.dialog.showError(\"Submission Error\", \"Undefined payload\");\r\n            return;\r\n        }\r\n        if (item.id === undefined || item.id <= 0) {\r\n            this.insert(item);\r\n        } else {\r\n            this.update(item);\r\n        }\r\n    }\r\n    \r\n    showForm = () => this.setState({ showForm: true });\r\n    hideForm = () => this.setState({ item: this.defaultItem, showForm: false });\r\n    edit = (model: M) => this.setState({ item: model }, this.showForm);\r\n\r\n    delete = (model: M) => {\r\n        this.dialog.showConfirmDanger(\"Delete Item\", \"Are you sure to delete this item?\")\r\n            .then(ok => {\r\n                if (ok) {\r\n                    this.service.delete(this.name, model.id)\r\n                        .then(resp => {\r\n                            this.dialog.showInfo(\"Delete Success\", \"Item has been deleted\");\r\n                            this.loadCurrentPage();\r\n                        })\r\n                        .catch(err => {\r\n                            this.dialog.showError(\"Delete Failed\", err);\r\n                        })\r\n\r\n                }\r\n            })\r\n    }\r\n    insert = (model: M) => {\r\n        this.dialog.showConfirm(\"Insert Item\", \"Are you sure to add this item? \")\r\n            .then(ok => {\r\n                if (ok) {\r\n                    this.service.post(this.name, model)\r\n                        .then(resp => {\r\n                            this.dialog.showInfo(\"Insert Success\", \"New item has been inserted\");\r\n                            this.loadCurrentPage();\r\n                            this.hideForm();\r\n                        })\r\n                        .catch(err => {\r\n                            this.dialog.showError(\"Insert Failed\", err);\r\n                        })\r\n\r\n                }\r\n            })\r\n    }\r\n    showInsertForm = () => this.setState({ showForm: true, item: this.defaultItem });\r\n    resetFilter = () => this.setState({ filter: {} }, this.load);\r\n    resetFormAndClose = () => this.setState({ showForm: false, item: this.defaultItem }, this.afterFormCloseCallback);\r\n    afterFormCloseCallback() {\r\n        //\r\n    }\r\n    formEditSubmit = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.item && this.state.item.id > 0) {\r\n            this.update(this.state.item as M);\r\n        } else if (this.state.item && (!this.state.item.id || this.state.item.id <= 0)) {\r\n            this.insert(this.state.item as M);\r\n        }\r\n    }\r\n    update = (model: M) => {\r\n        this.dialog.showConfirm(\"Update Item\", \"Are you sure to update this item? \")\r\n            .then(ok => {\r\n                if (ok) {\r\n                    this.service.put(this.name, model.id, model)\r\n                        .then(resp => {\r\n                            this.dialog.showInfo(\"Update Success\", \"Item has been updated\");\r\n                            this.loadCurrentPage();\r\n                            this.hideForm();\r\n                        })\r\n                        .catch(err => {\r\n                            this.dialog.showError(\"Update Failed\", err);\r\n                        })\r\n\r\n                }\r\n            })\r\n    }\r\n    patchAction = (model: M, action: string) => {\r\n        this.dialog.showConfirmWarning(\"Execute Action\", \"Are you sure to execute action: \" + action + \"? \")\r\n            .then(ok => {\r\n                if (ok) {\r\n                    this.service.patchAction(this.name, model.id, action)\r\n                        .then(resp => {\r\n                            this.dialog.showInfo(\"Action Completed\", \"Action: \" + action + \" has been executed\");\r\n                            this.loadCurrentPage();\r\n                            this.hideForm();\r\n                        })\r\n                        .catch(err => {\r\n                            this.dialog.showError(\"Update Failed\", err);\r\n                        })\r\n\r\n                }\r\n            })\r\n    }\r\n    loadCurrentPage = () => {\r\n        this.load(this.state.result.page, this.state.result.limit);\r\n    }\r\n    loadFromForm = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        this.load(0, this.state.result.limit, \"id\", false);\r\n    }\r\n    setItemsOrder = (name: string, desc: boolean) => {\r\n        this.load(this.state.result.page, this.state.result.limit, name, desc);\r\n    }\r\n\r\n    protected getDataTableHeaderComponent = () => {\r\n        return DataTableHeader(\r\n            this.getDataTableHeaderVals(),\r\n            this.activeOrder,\r\n            this.isOrderDesc,\r\n            this.setItemsOrder,\r\n            this.state.filter,\r\n            this.onFilterChange,\r\n        );\r\n    }\r\n\r\n    protected onFilterChange = (name: string, value: string) => {\r\n        const { filter } = this.state;\r\n        const valueIsBlank = !value || value.trim() === \"\";\r\n        if (valueIsBlank && filter[name]) {\r\n            delete filter[name];\r\n        } else {\r\n            filter[name] = value;\r\n        }\r\n        this.setState({ filter: filter }, () => {\r\n            const input = document.getElementById(`input-filter-${name}`);\r\n            input?.focus();\r\n        });\r\n    }\r\n\r\n    protected get paginationButton() {\r\n        const { result } = this.state;\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8\">\r\n                    <PaginationButtons\r\n                        limit={result.limit}\r\n                        totalData={result.totalData}\r\n                        activePage={result.page}\r\n                        onClick={(page: number) => this.load(page, this.state.result.limit)}\r\n                    />\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                    <FormInputLimit defaultLimit={result.limit} onSubmit={(limit) => {\r\n                        this.load(0, limit, result.order, result.orderDesc);\r\n                    }} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected actionButton = (item: M, showDelete: boolean = true) => {\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 px-1\">\r\n                    <AnchorButton\r\n                        onClick={() => this.edit(item)}\r\n                        iconClass=\"fas fa-edit\"\r\n                        className=\"btn btn-text clickable\" />\r\n                </div>\r\n                {showDelete ?\r\n                    <div className=\"col-md-6 px-1\">\r\n                        <AnchorButton\r\n                            onClick={() => this.delete(item)}\r\n                            className=\"btn btn-text text-danger\"\r\n                            iconClass=\"fas fa-times\" />\r\n                    </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    protected listToggler = <T extends BaseModel>(\r\n        items: T[],\r\n        model: M,\r\n        label: (item: T) => string,\r\n        add: (model: M) => any,\r\n        remove: (model: M, id: number) => any) => {\r\n        return (\r\n            <>\r\n                {items.map((item: T) => {\r\n                    return (\r\n                        <div className=\"listTogglerItem\" key={`list-toggler-item-${randomString(5)}`}>\r\n                            <ActionButton\r\n                                onClick={(e) => remove(model, item.id)}\r\n                                className=\"btn btn-text btn-sm text-danger me-2\"\r\n                                iconClass=\"fas fa-minus-circle\" />\r\n                            <span className=\"no-wrap\">{label(item)}</span>\r\n                        </div>\r\n                    );\r\n                })}\r\n                <ActionButton\r\n                    onClick={(e) => add(model)}\r\n                    className=\"btn btn-sm btn-text\"\r\n                    iconClass=\"fas fa-plus-circle text-success\" />\r\n            </>\r\n        );\r\n    }\r\n\r\n    protected get closeFormButton() {\r\n        return (\r\n            <ActionButton onClick={this.resetFormAndClose} iconClass=\"fas fa-times\" className=\"btn btn-secondary btn-sm mx-2\">\r\n                Close form\r\n            </ActionButton>\r\n        )\r\n    }\r\n    protected get showFormButton() {\r\n        return (\r\n            <ActionButton onClick={this.showInsertForm} iconClass=\"fas fa-plus\" className=\"btn btn-primary btn-sm mx-2\">\r\n                Insert new data\r\n            </ActionButton>\r\n        )\r\n    }\r\n\r\n    protected get tableFooter() {\r\n        return (\r\n            <tfoot>\r\n                <tr>\r\n                    <td colSpan={4}>\r\n                        <ActionButton type=\"submit\" iconClass=\"fas fa-redo\" className=\"btn btn-secondary btn-sm me-2\">\r\n                            Reload\r\n                        </ActionButton>\r\n                        <ActionButton type=\"button\" onClick={this.resetFilter} className=\"btn btn-warning btn-sm\">\r\n                            Reset Filter\r\n                        </ActionButton>\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        )\r\n    }\r\n}\r\n\r\nconst FormInputLimit = (props: {\r\n    onSubmit: (limit: number) => any,\r\n    defaultLimit: number,\r\n}) => {\r\n    const [limit, setLimit] = useState(props.defaultLimit);\r\n    const onInputChange = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLInputElement;\r\n        setLimit(parseInt(input.value));\r\n    }\r\n    return (\r\n        <form \r\n            className=\"input-group\"\r\n            onSubmit={(e) => {\r\n                e.preventDefault();\r\n                props.onSubmit(limit);\r\n            }}\r\n        >\r\n            <input\r\n                type=\"number\"\r\n                value={limit}\r\n                min={1}\r\n                className=\"form-control form-control-sm\"\r\n                onChange={onInputChange}\r\n                required\r\n            />\r\n            <div className=\"input-group-append\">\r\n                <ActionButton\r\n                    type=\"submit\"\r\n                    className=\"btn btn-sm btn-info text-white\"\r\n                    iconClass=\"fas fa-play\"\r\n                    children=\"Apply Page Size\"\r\n                />\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default BaseMasterDataPage;","import { resolve } from \"inversify-react\";\r\nimport { ChangeEvent, Component, FormEvent, ReactNode, useState } from \"react\";\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport Employee, { Education } from \"../../../models/Employee\";\r\nimport School from \"../../../models/School\";\r\nimport Settings from \"../../../settings\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport { getInputReadableDate } from \"../../../utils/stringUtil\";\r\nimport ControlledComponent from \"../../ControlledComponent\";\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\nimport FileUploadService from './../../../services/FileUploadService';\r\nimport { DialogObserver } from './../../../components/dialog/DialogObserver';\r\n\r\nclass State extends BaseMasterDataState<Employee> {\r\n\r\n}\r\nclass EmployeesPage extends BaseMasterDataPage<Employee, BaseProps, State> {\r\n  @resolve(FileUploadService)\r\n  private upload: FileUploadService;\r\n\r\n  constructor(props: BaseProps) {\r\n    super(props, \"employees\", \"Employees Management\");\r\n    this.state = new State();\r\n  }\r\n  get defaultItem(): Employee {\r\n    const e = new Employee();\r\n    return e;\r\n  }\r\n\r\n  getDataTableHeaderVals = () => {\r\n    return [\r\n      new DataTableHeaderValue(\"nisdm\", \"NISDM\"),\r\n      new DataTableHeaderValue(\"user.fullName\", \"Full Name\"),\r\n      new DataTableHeaderValue(\"user.email\", \"Email\"),\r\n      new DataTableHeaderValue(\"user.birthDate\", \"BirthDate\"),\r\n      new DataTableHeaderValue(\"user.gender\", \"Gender\"),\r\n      new DataTableHeaderValue(null, \"Signature\", false),\r\n      new DataTableHeaderValue(null, \"School\", false),\r\n      new DataTableHeaderValue(null, \"Education\", false),\r\n    ]\r\n  }\r\n  removeEducation = (item: Employee, educationId: number) => {\r\n    this.dialog.showConfirmDanger(\"Remove Education\", \"Dou you want to remove education data?\")\r\n      .then(ok => {\r\n        if (ok) {\r\n          item.removeEducation(educationId);\r\n          this.update(item);\r\n        }\r\n      })\r\n\r\n  }\r\n  addEducation = (item: Employee) => {\r\n    this.dialog.showContent(\"Add Education\", <AddEducationForm item={item} update={(e) => this.submitAddEducation(item, e)} />);\r\n  }\r\n  submitAddEducation = (item: Employee, education: Education) => {\r\n    item.educations.push(education);\r\n    this.update(item);\r\n  }\r\n\r\n  removeSchool = (item: Employee, schoolId: number) => {\r\n    this.dialog.showConfirmDanger(\"Remove School\", \"Dou you want to remove school data?\")\r\n      .then(ok => {\r\n        if (ok) {\r\n          item.removeSchool(schoolId);\r\n          this.update(item);\r\n        }\r\n      })\r\n\r\n  }\r\n  addSchool = (item: Employee) => {\r\n    this.service.get<Employee>('employees', item.id)\r\n      .then(employee => {\r\n        employee = Object.assign(new Employee(), employee);\r\n        this.service.list<School>('schools', 0, -1, undefined)\r\n          .then(schoolsResponse => {\r\n            this.dialog.showContent(\"Add School\",\r\n              <AddSchoolForm\r\n                schools={schoolsResponse.items}\r\n                update={(e) => this.submitAddSchool(employee, e)}\r\n              />);\r\n          })\r\n          .catch(console.error);\r\n      })\r\n      .catch(console.error);\r\n\r\n  }\r\n  submitAddSchool = (item: Employee, school: School) => {\r\n    if (item.addSchool(school)) {\r\n      this.update(item);\r\n    }\r\n  }\r\n  showSignatureForm = (item: Employee) => {\r\n    const closeObs = {\r\n      obs: {\r\n        close: () => { }\r\n      }\r\n    };\r\n    const submit = (emp: Employee, file: File) => {\r\n      this.upload.uploadSignature(emp, file)\r\n        .then((response) => {\r\n          if (closeObs.obs.close) {\r\n            closeObs.obs.close();\r\n          }\r\n          this.toast.showSuccess('Signature has been uploaded');\r\n\r\n          // Force update to reload all signature image\r\n          this.forceUpdate();\r\n        })\r\n        .catch((e) => {\r\n          this.toast.showDanger('Failed to upload signature');\r\n          console.error(e);\r\n        });\r\n    }\r\n    this.dialog.showContent(\r\n      'Upload Signature',\r\n      <FormUploadSignature employee={item} submit={submit} />,\r\n    );\r\n  }\r\n  render(): ReactNode {\r\n    if (this.state.showForm && this.state.item) {\r\n      return (\r\n        <ViewTemplate title={this.title} back=\"/admin\">\r\n          {this.closeFormButton}\r\n          <FormEdit item={this.state.item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n        </ViewTemplate>\r\n      );\r\n    }\r\n\r\n    const result = this.state.result;\r\n    const items = result?.items;\r\n    return (\r\n      <ViewTemplate title={this.title} back=\"/admin\">\r\n        {this.showFormButton}\r\n        {result === undefined || items === undefined ?\r\n          <i>Loading...</i> :\r\n          <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{ overflow: 'auto' }}>\r\n            {this.paginationButton}\r\n            <table className=\"commonDataTable table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>No</th>\r\n                  {this.getDataTableHeaderComponent()}\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, i) => {\r\n                  const { user, schools, educations } = item;\r\n                  return (\r\n                    <tr key={\"user-\" + item.id}>\r\n                      <td>{this.startingNumber + i}</td>\r\n                      <td>{item.nisdm}</td>\r\n                      <td>{user.fullName}</td>\r\n                      <td>{user.email}</td>\r\n                      <td>{new Date(user.birthDate).toLocaleDateString()}</td>\r\n                      <td>{user.gender}</td>\r\n                      <td>\r\n                        <img\r\n                          width={50}\r\n                          height={50}\r\n                          src={signaturePath(item.id)}\r\n                        />\r\n                        <div>\r\n                          <ActionButton\r\n                            iconClass=\"fas fa-edit\"\r\n                            className=\"btn btn-dark btn-sm\"\r\n                            onClick={() => this.showSignatureForm(item)}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>{this.listToggler(\r\n                        schools,\r\n                        item,\r\n                        (school) => `${school.name}`,\r\n                        this.addSchool,\r\n                        this.removeSchool)}\r\n                      </td>\r\n                      <td>\r\n                        {this.listToggler(\r\n                          educations,\r\n                          item,\r\n                          (ed) => `${ed.type}: ${ed.name}`,\r\n                          this.addEducation,\r\n                          this.removeEducation)}\r\n                      </td>\r\n\r\n                      <td>{this.actionButton(item)}</td>\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n              {this.tableFooter}\r\n            </table>\r\n          </form>}\r\n      </ViewTemplate>\r\n    )\r\n  }\r\n}\r\n\r\nconst signaturePath = (id: any) => {\r\n  return `${Settings.App.hosts.api}/files/employeesignature/${id}?v=${new Date().getTime()}`;\r\n}\r\n\r\nconst FormUploadSignature = (props: { employee: Employee, submit: (employee: Employee, file: File) => any }) => {\r\n  const [file, setFile] = useState<any>(null);\r\n  const onSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (file && file instanceof File) {\r\n      props.submit(props.employee, file);\r\n    }\r\n  };\r\n  const onChange = (e: ChangeEvent) => {\r\n    const input = e.target as HTMLInputElement;\r\n    if (input.files && input.files[0]) {\r\n      setFile(input.files[0]);\r\n    }\r\n  }\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <p>Select file</p>\r\n      <input required onChange={onChange} className=\"form-control\" type=\"file\" accept=\"image/png\" />\r\n      <p></p>\r\n      <ActionButton className=\"btn btn-success\" type=\"submit\">Upload</ActionButton>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst FormEdit = (props: {\r\n  item: Employee,\r\n  onSubmit: (e: FormEvent) => any,\r\n  handleInputChange: (e: ChangeEvent) => any\r\n}) => {\r\n  const item = props.item;\r\n  const onChange = props.handleInputChange;\r\n  return (\r\n    <div className=\"formEditContainer\">\r\n      <form className=\"masterDataForm px-3 py-3 border rounded border-gray\" onSubmit={props.onSubmit}>\r\n        <p>NiSDM</p>\r\n        <input className=\"form-control\" id=\"item.nisdm\" name=\"item.nisdm\" value={item.nisdm} onChange={onChange} required />\r\n        <p>Full Name</p>\r\n        <input className=\"form-control\" id=\"item.user.fullName\" name=\"item.user.fullName\" value={item.user.fullName} onChange={onChange} required />\r\n        <p>Email</p>\r\n        <input className=\"form-control\" id=\"item.user.email\" name=\"item.user.email\" type=\"email\" value={item.user.email} onChange={onChange} required />\r\n        <p>Gender</p>\r\n        <select className=\"form-control\" value={item.user.gender} id=\"item.user.gender\" name=\"item.user.gender\" onChange={onChange} required>\r\n          <option  >MALE</option>\r\n          <option  >FEMALE</option>\r\n        </select>\r\n        <p>Birth Date</p>\r\n        <input type=\"date\" className=\"form-control\" id=\"item.user.birthDate\" name=\"item.user.birthDate\" value={getInputReadableDate(new Date(item.user.birthDate))} onChange={onChange} required />\r\n        <p>Birth Place</p>\r\n        <input className=\"form-control\" id=\"item.user.birthPlace\" name=\"item.user.birthPlace\" value={item.user.birthPlace} onChange={onChange} required />\r\n\r\n        <p>Phone Number</p>\r\n        <input className=\"form-control\" id=\"item.user.phoneNumber\" name=\"item.user.phoneNumber\" value={item.user.phoneNumber} onChange={onChange} required />\r\n\r\n        <p>No KK</p>\r\n        <input className=\"form-control\" id=\"item.noKk\" name=\"item.noKk\" value={item.noKk} onChange={onChange} required />\r\n        <p>No KTP</p>\r\n        <input className=\"form-control\" id=\"item.noKtp\" name=\"item.noKtp\" value={item.noKtp} onChange={onChange} required />\r\n\r\n        <p>Alamat Sesuai KTP</p>\r\n        <input className=\"form-control\" id=\"item.addressKtp\" name=\"item.addressKtp\" value={item.addressKtp} onChange={onChange} required />\r\n        <p>Alamat Domisili</p>\r\n        <input className=\"form-control\" id=\"item.addressOther\" name=\"item.addressOther\" value={item.addressOther} onChange={onChange} />\r\n\r\n        <p>Nama Ibu</p>\r\n        <input className=\"form-control\" id=\"item.motherName\" name=\"item.motherName\" value={item.motherName} onChange={onChange} />\r\n        <p>Nama Ayah</p>\r\n        <input className=\"form-control\" id=\"item.fatherName\" name=\"item.fatherName\" value={item.fatherName} onChange={onChange} />\r\n\r\n        <p>NPWP</p>\r\n        <input className=\"form-control\" id=\"item.npwp\" name=\"item.npwp\" value={item.npwp} onChange={onChange} />\r\n        <p>No Rekening BSI</p>\r\n        <input className=\"form-control\" id=\"item.bankAccountNumber\" name=\"item.bankAccountNumber\" value={item.bankAccountNumber} onChange={onChange} />\r\n\r\n        <p></p>\r\n        <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\ntype AddEducationFormState = { item: Education }\r\nclass AddEducationForm extends ControlledComponent<{ item: Employee, update: (item: Education) => any }, AddEducationFormState>{\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      item: new Education()\r\n    };\r\n  }\r\n\r\n  onSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    this.props.update(this.state.item);\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const item = this.state.item;\r\n    const levels = [\"S1\", \"S2\", \"S3\", \"D1\", \"D2\", \"D3\",]\r\n    return (\r\n      <form onSubmit={this.onSubmit}>\r\n        <p>Type</p>\r\n        <select className=\"form-control\" value={item.type} name=\"item.type\" onChange={this.handleInputChange}>\r\n          {levels.map(i => <option key={\"add-edu-lvl-\" + i}>{i}</option>)}\r\n        </select>\r\n        <p>Name</p>\r\n        <input className=\"form-control\" value={item.name} name=\"item.name\" onChange={this.handleInputChange} />\r\n        <p>Major</p>\r\n        <input className=\"form-control\" value={item.major} name=\"item.major\" onChange={this.handleInputChange} />\r\n        <p>Title</p>\r\n        <input className=\"form-control\" value={item.title} name=\"item.title\" onChange={this.handleInputChange} />\r\n        <p />\r\n        <input className=\"btn btn-primary\" type=\"submit\" value=\"Save\" />\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nclass AddSchoolForm extends Component<{ schools: School[], update: (item: School) => any, dialogObserver?: DialogObserver }, any>{\r\n  selectedSchool: School;\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.selectedSchool = this.props.schools[0];\r\n  }\r\n\r\n  onSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    this.props.update(this.selectedSchool);\r\n    if (this.props.dialogObserver) {\r\n      this.props.dialogObserver.close();\r\n    }\r\n  }\r\n\r\n  render(): ReactNode {\r\n    return (\r\n      <form onSubmit={this.onSubmit}>\r\n        <p>Type</p>\r\n        <select className=\"form-control\" >\r\n          {this.props.schools.map(i => {\r\n            return <option onClick={(e) => { this.selectedSchool = i }} key={\"add-school-\" + i.code}>{i.name}</option>\r\n          })}\r\n        </select>\r\n        <p />\r\n        <input className=\"btn btn-primary\" type=\"submit\" value=\"Save\" />\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default commonWrapper(EmployeesPage)\r\n","import { ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../layout/ViewTemplate\";\r\nimport BaseState from \"../../models/BaseState\";\r\nimport { commonWrapper } from \"../../utils/commonWrapper\";\r\nimport { BasePage } from \"../BasePage\";\r\nimport BaseProps from '../../models/BaseProps';\r\nimport AnchorButton from '../../components/buttons/AnchorButton';\r\n\r\nclass State extends BaseState {\r\n\r\n}\r\nclass MainAdminPage extends BasePage<BaseProps, State> {\r\n    state: Readonly<State> = new State();\r\n    constructor(props:BaseProps)\r\n    {\r\n        super(props, true, \"Admin Area\");\r\n    }\r\n    componentDidMount(): void {\r\n        this.forceUpdate();\r\n    }\r\n    componentDidUpdate(): void {\r\n         \r\n    }\r\n    render(): ReactNode {\r\n        \r\n        return (\r\n            <ViewTemplate title=\"Admin Area\">\r\n                <div className=\"row\">\r\n                    {managementPages.map(m=>\r\n                        <div key={\"mngmnt-menu-\"+m.url} className=\"col-md-3 mb-2\">\r\n                            <AnchorButton className=\"btn btn-light px-5 py-5 w-100\" to={m.url} iconClass={m.iconClass} >\r\n                                {m.label}\r\n                            </AnchorButton>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nconst managementPages = [\r\n    {\r\n        url:'/admin/users',\r\n        label:'Users',\r\n        iconClass:'fas fa-user-circle'\r\n    },\r\n    {\r\n        url:'/admin/schools',\r\n        label:'Schools',\r\n        iconClass:'fas fa-school'\r\n    },\r\n    {\r\n        url:'/admin/employees',\r\n        label:'Employees',\r\n        iconClass:'fas fa-users'\r\n    },\r\n    {\r\n        url:'/admin/semesterperiods',\r\n        label:'Semesters',\r\n        iconClass:'fas fa-calendar-alt'\r\n    },\r\n    {\r\n        url:'/admin/classlevels',\r\n        label:'Classes',\r\n        iconClass:'fas fa-chalkboard-teacher'\r\n    },\r\n    {\r\n        url:'/admin/students',\r\n        label:'Students',\r\n        iconClass:'fas fa-user-graduate'\r\n    },\r\n    {\r\n        url:'/admin/classmembers',\r\n        label:'Class Members',\r\n        iconClass:'fas fa-user-friends'\r\n    }\r\n]\r\n\r\nexport default commonWrapper(MainAdminPage);","\nimport BaseModel from './BaseModel';\nexport default class School extends BaseModel {\n    nis:string;\n    name:string;\n    code:string;\n    address:string;    \n    level:string;\n}","import { resolve } from \"inversify-react\";\nimport { FormEvent } from \"react\";\nimport ActionButton from \"../../../components/buttons/ActionButton\";\nimport MasterDataService from \"../../../services/MasterDataService\";\nimport ToastService from \"../../../services/ToastService\";\nimport ControlledComponent from \"../../ControlledComponent\";\nimport Employee from './../../../models/Employee';\n\ntype SetEmployeeFormProps = { onSelect(employee: Employee): any, };\ntype SetEmployeeFormState = { searchEmployee: string, employees: Employee[], selectedEmployee: Employee | undefined };\n\nexport default class SelectEmployeeForm extends ControlledComponent<SetEmployeeFormProps, SetEmployeeFormState> {\n\n  @resolve(MasterDataService)\n  private service: MasterDataService;\n  @resolve(ToastService)\n  private toast: ToastService;\n\n  constructor(props: SetEmployeeFormProps) {\n    super(props);\n    this.state = {\n      searchEmployee: '',\n      employees: [],\n      selectedEmployee: undefined,\n    }\n  }\n\n  search = (e: FormEvent) => {\n    e.preventDefault();\n    this.service.list<Employee>('employees', 0, 10, 'user.fullName', false, 'user.fullName:' + this.state.searchEmployee)\n      .then((result) => {\n        this.handleSearchEmployee(result.items);\n      })\n      .catch(console.error);\n  }\n  handleSearchEmployee = (items: Employee[]) => {\n    if (!items || items.length === 0) {\n      this.toast.showDanger(\"No employee contains name \\\"\" + this.state.searchEmployee + \"\\\" was found\");\n      return;\n    }\n    this.setState({ employees: items });\n  }\n  closeDropdown = () => {\n    this.setState({ employees: [] });\n  }\n  setSelectedEmployee = (e: Employee) => {\n    this.setState({ selectedEmployee: e, searchEmployee: e.user.fullName }, this.closeDropdown);\n  }\n  submit = () => {\n    const { selectedEmployee } = this.state;\n    if (!selectedEmployee) {\n      this.toast.showDanger(\"Invalid employee\");\n      return;\n    }\n    this.props.onSelect(selectedEmployee);\n    (this.props as any).dialogObserver?.close();\n  }\n\n  render() {\n    const { employees } = this.state;\n    return (\n      <div>\n        <p>Select Employee</p>\n        <form onSubmit={this.search} className=\"my-5 mx-5 pb-5\">\n          <div className=\"input-group\">\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              name=\"searchEmployee\"\n              value={this.state.searchEmployee}\n              placeholder=\"Full Name\"\n              onChange={this.handleInputChange}\n              required />\n            <div className=\"input-group-append\">\n              <input type=\"submit\" className=\"btn btn-primary\" value={\"Search\"} />\n            </div>\n          </div>\n\n          <div style={{ position: 'absolute', width: '75%' }}>\n            {employees.length > 0 ?\n\n              <div className=\"bg-light border border-dark px-2 py-1 w-100\" style={{ position: 'relative' }}>\n                <ActionButton className=\"btn btn-text btn-sm\" iconClass=\"fas fa-times\" onClick={this.closeDropdown}>close</ActionButton>\n                <div style={{ overflowY: 'auto', height: '100px' }}>\n                  <div className=\"no-wrap\" style={{ width: 'max-content' }}>\n                    {employees.map(e => {\n                      return (\n                        <div key={\"set-emp-\" + e.id}>\n                          <a className=\"btn btn-text clickable\" onClick={() => this.setSelectedEmployee(e)}>\n                            {e.user.fullName.trim()}, nisdm: {e.nisdm}\n                          </a>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              </div> : null}\n          </div>\n          <button type=\"button\" className=\"btn btn-success mt-3\" onClick={this.submit}>\n            Ok\n          </button>\n        </form>\n      </div>\n    )\n  }\n}","import { resolve } from \"inversify-react\";\nimport { Component, FormEvent } from \"react\";\nimport ActionButton from \"../../../components/buttons/ActionButton\";\nimport School from '../../../models/School';\nimport SchoolConfig from '../../../models/SchoolConfig';\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\nimport Employee from '../../../models/Employee';\nimport DialogService from '../../../services/DialogService';\nimport SchoolConfigService from '../../../services/SchoolConfigService';\nimport SelectEmployeeForm from \"./SelectEmployeeForm\";\n\ninterface Props {\n  school: School;\n  config: SchoolConfig;\n}\n\ninterface State {\n  config: SchoolConfig;\n}\n\nclass SchoolConfigForm extends Component<Props, State> {\n  @resolve(DialogService)\n  private dialog: DialogService;\n  @resolve(SchoolConfigService)\n  private service: SchoolConfigService;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      config: props.config,\n    };\n  }\n  onSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    this.saveConfig();\n  }\n  saveConfig = () => {\n    const { config } = this.state;\n    this.dialog.showConfirm('Save School Config', 'Do you want to save config?')\n      .then((ok) => {\n        if (ok) {\n          this.service.update(config)\n            .then(() => {\n              this.dialog.showInfo('School Config Update', 'Config has been updated');\n            })\n            .catch((err) => this.dialog.showError('School Config Update', err));\n        }\n      });\n  }\n\n  selectHeadMaster = () => {\n    this.showSelectEmployeeForm('Select School Head Master', 'headMaster');\n  }\n  selectAdmin = () => {\n    this.showSelectEmployeeForm('Select School Admin', 'admin');\n  }\n\n  showSelectEmployeeForm = (title: string, field: keyof SchoolConfig) => {\n    const { config } = this.state;\n    const onSelect = (e: Employee) => {\n      (config as any)[field] = e;\n      this.setState({ config });\n    }\n\n    this.dialog.showContent(title, <SelectEmployeeForm onSelect={onSelect} />);\n  }\n\n  render() {\n    const { school } = this.props;\n    const { config } = this.state;\n    return (\n      <form className=\"container-fluid\" onSubmit={this.onSubmit}>\n        <h4 className=\"text-center\">School Config {school.name}</h4>\n        <table>\n          <tbody>\n            <tr>\n              <td>\n                <div>\n                  <ActionButton iconClass=\"fas fa-edit\" className=\"btn btn-text btn-sm me-1\" onClick={this.selectHeadMaster} />\n                  Head Master\n                </div>\n              </td>\n              <td><span className=\"px-3\">{config.headMaster?.user?.fullName ?? '-'}</span></td>\n            </tr>\n            <tr>\n              <td>\n                <div>\n                  <ActionButton iconClass=\"fas fa-edit\" className=\"btn btn-text btn-sm me-1\" onClick={this.selectAdmin} />\n                  Admin\n                </div>\n              </td>\n              <td><span className=\"px-3\">{config.admin?.user?.fullName ?? '-'}</span></td>\n            </tr>\n            <tr>\n              <td colSpan={2}>\n                <button type=\"submit\" className=\"btn btn-primary\">Save</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </form>\n    )\n  }\n}\n\nexport default commonWrapper(SchoolConfigForm);\n","import { resolve } from \"inversify-react\";\r\nimport { ChangeEvent, FormEvent, ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport School from \"../../../models/School\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\nimport SchoolConfigService from './../../../services/SchoolConfigService';\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport SchoolConfig from './../../../models/SchoolConfig';\r\nimport SchoolConfigForm from \"./SchoolConfigForm\";\r\n\r\nclass State extends BaseMasterDataState<School> {\r\n  showConfigForm = false;\r\n  config?: SchoolConfig;\r\n}\r\nclass SchoolsPage extends BaseMasterDataPage<School, BaseProps, State> {\r\n  @resolve(SchoolConfigService)\r\n  private configService: SchoolConfigService;\r\n\r\n  constructor(props: BaseProps) {\r\n    super(props, \"schools\", \"School Management\");\r\n    this.state = new State();\r\n  }\r\n  get defaultItem(): School { return new School() }\r\n  getDataTableHeaderVals(): DataTableHeaderValue[] {\r\n    return [\r\n      new DataTableHeaderValue(\"nis\", \"NIS\"),\r\n      new DataTableHeaderValue(\"name\", \"Name\"),\r\n      new DataTableHeaderValue(\"level\", \"Level\"),\r\n      new DataTableHeaderValue(\"code\", \"Code\"),\r\n      new DataTableHeaderValue(\"address\", \"Address\"),\r\n      new DataTableHeaderValue(null, \"Config\", false),\r\n    ]\r\n  }\r\n  showConfigForm = (item: School) => {\r\n    this.configService.getConfig(item.id)\r\n      .then((config) => {\r\n        this.setState({ config,  item, showConfigForm: true })\r\n      })\r\n      .catch((e) => this.dialog.showError(\"Load Config Failed\", e));\r\n  }\r\n  afterFormCloseCallback() {\r\n    this.setState({ showConfigForm: false });\r\n  }\r\n\r\n  render(): ReactNode {\r\n\r\n    const { showForm, config, showConfigForm, item, result } = this.state;\r\n    if (config && showConfigForm && item) {\r\n      return (\r\n        <ViewTemplate title={this.title} back=\"/admin\">\r\n          {this.closeFormButton}\r\n          <SchoolConfigForm school={item} config={config} />\r\n        </ViewTemplate>\r\n      )\r\n    }\r\n\r\n    if (showForm && item) {\r\n      return (\r\n        <ViewTemplate title={this.title} back=\"/admin\">\r\n          {this.closeFormButton}\r\n          <FormEdit item={item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n        </ViewTemplate>\r\n      );\r\n    }\r\n    const items = result?.items;\r\n    return (\r\n      <ViewTemplate title={this.title} back=\"/admin\">\r\n        {result === undefined || items === undefined ?\r\n          <i>Loading...</i> :\r\n          <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{ overflow: 'auto' }}>\r\n            {this.paginationButton}\r\n            <table className=\"commonDataTable table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>No</th>\r\n                  {this.getDataTableHeaderComponent()}\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, i) => {\r\n                  return (\r\n                    <tr key={\"School-\" + item.id}>\r\n                      <td>{this.startingNumber + i}</td>\r\n                      <td>{item.nis}</td>\r\n                      <td>{item.name}</td>\r\n                      <td>{item.level}</td>\r\n                      <td>{item.code}</td>\r\n                      <td>{item.address}</td>\r\n                      <td>\r\n                        <ActionButton\r\n                          className=\"btn btn-text btn-sm\"\r\n                          iconClass=\"fas fa-cog\"\r\n                          onClick={() => this.showConfigForm(item)}\r\n                        />\r\n                      </td>\r\n                      <td>{this.actionButton(item, false)}</td>\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n              {this.tableFooter}\r\n            </table>\r\n          </form>}\r\n      </ViewTemplate>\r\n    )\r\n  }\r\n}\r\n\r\nexport default commonWrapper(SchoolsPage);\r\n\r\nconst FormEdit = (props: {\r\n  item: School,\r\n  onSubmit: (e: FormEvent) => any,\r\n  handleInputChange: (e: ChangeEvent) => any\r\n}) => {\r\n  const item = props.item;\r\n  return (\r\n    <div className=\"formEditContainer\">\r\n      <form className=\"masterDataForm px-3 py-3 border rounded border-gray\" onSubmit={props.onSubmit}>\r\n        <p>Nis</p>\r\n        <input className=\"form-control\" name=\"item.nis\" id=\"item.nis\" value={item.nis} onChange={props.handleInputChange} />\r\n        <p>Name</p>\r\n        <input className=\"form-control\" name=\"item.name\" id=\"item.name\" value={item.name} onChange={props.handleInputChange} />\r\n        <p>Code</p>\r\n        <input disabled className=\"form-control\" name=\"item.code\" id=\"item.code\" value={item.code} onChange={props.handleInputChange} />\r\n        <p>Address</p>\r\n        <textarea className=\"form-control\" name=\"item.code\" id=\"item.address\" value={item.address} onChange={props.handleInputChange} />\r\n        <p>Level</p>\r\n        <select className=\"form-control\" name=\"item.level\" id=\"item.level\" value={item.level} onChange={props.handleInputChange}>\r\n          <option>MA</option>\r\n          <option>MTS</option>\r\n        </select>\r\n\r\n        <p></p>\r\n        <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { ChangeEvent, FormEvent, ReactNode } from \"react\";\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport User from \"../../../models/User\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport { getInputReadableDate } from \"../../../utils/stringUtil\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\n\r\n\r\nconst ACTION_RESET_PASSWORD = 'resetPassword';\r\n\r\nclass State extends BaseMasterDataState<User> {\r\n\r\n}\r\nclass UsersPage extends BaseMasterDataPage<User, BaseProps, State> {\r\n    constructor(props: BaseProps) {\r\n        super(props, \"users\", \"User Management\");\r\n        this.state = new State();\r\n    }\r\n    get defaultItem(): User { return new User() }\r\n    getDataTableHeaderVals = () => {\r\n        return [\r\n            new DataTableHeaderValue(\"email\", \"Email\"),\r\n            new DataTableHeaderValue(\"username\", \"Acct Name\"),\r\n            new DataTableHeaderValue(\"fullName\", \"Full Name\"),\r\n            new DataTableHeaderValue(\"displayName\", \"Display Name\"),\r\n            new DataTableHeaderValue(\"birthDate\", \"Date of Birth\"),\r\n            new DataTableHeaderValue(\"birthPlace\", \"Place of Birth\"),\r\n            new DataTableHeaderValue(\"gender\", \"Gender\"),\r\n            new DataTableHeaderValue(\"role\", \"Role\", false),\r\n            new DataTableHeaderValue(\"phoneNumber\", \"Phone\"),\r\n        ];\r\n    }\r\n    resetPassword = (item:User) => {\r\n        this.patchAction(item, ACTION_RESET_PASSWORD);\r\n    }\r\n    render(): ReactNode {\r\n\r\n        if (this.state.showForm && this.state.item) {\r\n            return (\r\n                <ViewTemplate title={this.title} back=\"/admin\">\r\n                    {this.closeFormButton}\r\n                    <FormEdit item={this.state.item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n                </ViewTemplate>\r\n            );\r\n        }\r\n        \r\n        const result = this.state.result;\r\n        const items = result?.items;\r\n        return (\r\n            <ViewTemplate title={this.title} back=\"/admin\">\r\n                {result === undefined || items === undefined ?\r\n                    <i>Loading...</i> :\r\n                    <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{overflow: 'auto'}}>\r\n                        {this.paginationButton}\r\n                        <table className=\"commonDataTable table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>No</th>\r\n                                    {this.getDataTableHeaderComponent()}\r\n                                    <th>Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {items.map((item, i) => {\r\n                                    return (\r\n                                        <tr key={\"user-\" + item.id}>\r\n                                            <td>{this.startingNumber + i}</td>\r\n                                            <td>{item.email}</td>\r\n                                            <td>{item.username}</td>\r\n                                            <td>{item.fullName}</td>\r\n                                            <td>{item.displayName}</td>\r\n                                            <td>{new Date(item.birthDate).toLocaleDateString()}</td>\r\n                                            <td>{item.birthPlace}</td>\r\n                                            <td>{item.gender}</td>\r\n                                            <td>\r\n                                                {item.authorities.map(a => <div className=\"badge bg-success  me-1\">{a.name?.toLocaleLowerCase()}</div>)}\r\n                                            </td>\r\n                                            <td>{item.phoneNumber}</td>\r\n                                            \r\n                                            <td>\r\n                                                <div \r\n                                                    className=\"d-flex\" \r\n                                                    style={{flexWrap: 'nowrap', width: '150px'}}>\r\n                                                    <ActionButton \r\n                                                        iconClass=\"fas fa-lock-open\" \r\n                                                        className=\"btn btn-warning btn-sm me-2\"\r\n                                                        onClick={() => this.resetPassword(item)}\r\n                                                    >\r\n                                                    </ActionButton>\r\n                                                    {this.actionButton(item)}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                            {this.tableFooter}\r\n                        </table>\r\n                    </form>}\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nconst FormEdit = (props:{\r\n    item:User, \r\n    onSubmit:(e:FormEvent) => any, \r\n    handleInputChange:(e:ChangeEvent)=>any\r\n}) => {\r\n    const item = props.item;\r\n    const onChange = props.handleInputChange;\r\n    return (\r\n        <div className=\"formEditContainer\">\r\n            <form className=\"masterDataForm px-3 py-3 border rounded border-gray\"  onSubmit={props.onSubmit}>\r\n                <p>Full Name</p>\r\n                <input className=\"form-control\" id=\"item.fullName\" name=\"item.fullName\" value={item.fullName}  onChange={onChange} required/>\r\n                <p>Display Name</p>\r\n                <input className=\"form-control\" id=\"item.displayName\" name=\"item.displayName\" value={item.displayName}  onChange={onChange} required/>\r\n                <p>Email</p>\r\n                <input className=\"form-control\" id=\"item.email\" name=\"item.email\" type=\"email\" value={item.email}  onChange={onChange} required/>\r\n                <p>Gender</p>\r\n                <select className=\"form-control\" value={item.gender} id=\"item.gender\" name=\"item.gender\" onChange={onChange} required>\r\n                    <option>MALE</option>\r\n                    <option>FEMALE</option>\r\n                </select>\r\n                <p>Birth Date</p>\r\n                <input type=\"date\" className=\"form-control\" id=\"item.birthDate\" name=\"item.birthDate\" value={getInputReadableDate(new Date(item.birthDate))} onChange={onChange} required/>\r\n                <p>Birth Place</p>\r\n                <input className=\"form-control\" id=\"item.birthPlace\" name=\"item.birthPlace\" value={item.birthPlace} onChange={onChange} required/>\r\n                \r\n                <p>Phone Number</p>\r\n                <input className=\"form-control\" id=\"item.phoneNumber\" name=\"item.phoneNumber\" value={item.phoneNumber} onChange={onChange} required/>\r\n                \r\n                <p></p>\r\n                <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default commonWrapper(UsersPage);\r\n","const ErrorMessage = (props:{children:any, show?:boolean}) => {\n\n    if (props.show === false)\n    {\n        return null;\n    }\n    return (\n        <div className=\"alert alert-danger\">\n            {props.children}\n        </div>\n    )\n}\n\nexport default ErrorMessage;","const InfoMessage = (props:{children:any, show?:boolean}) => {\n\n    if (props.show === false)\n    {\n        return null;\n    }\n    return (\n        <div className=\"alert alert-info\">\n            {props.children}\n        </div>\n    )\n}\n\nexport default InfoMessage;","import { randomString } from \"./stringUtil\";\r\nimport React, { ChangeEvent } from 'react'\r\n\r\nexport const readFileContentUtf8 = (file:File): Promise<string> => {\r\n\r\n    return new Promise((resolve, reject)=>{\r\n        const reader = new FileReader();\r\n        reader.readAsText(file, \"UTF-8\");\r\n        reader.onload = (evt) => {\r\n            let el = evt.target;\r\n            if (!el)\r\n            {\r\n                reject(new Error(\"Invalid element\"));\r\n                return;\r\n            }\r\n            if (typeof el.result === \"string\")\r\n            {\r\n                resolve(el.result);\r\n            }\r\n            else\r\n            {\r\n                reject(new Error(\"Invalid result type\"));\r\n            }\r\n        }\r\n        reader.onerror = reject;\r\n    })\r\n}\r\n\r\nexport const downloadFile = (data:any, filename:string, type:\"text/plain\" | \"application/json\") : void => {\r\n    var file = new Blob([data], {type: type});\r\n    if ((window.navigator as any).msSaveOrOpenBlob) // IE10+\r\n        (window.navigator as any).msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nexport const CommonTable = (props:{className:string, content:any[][]}) => {\r\n    return (\r\n        <table className={props.className}>\r\n            <tbody>\r\n                {props.content.map(row=>{\r\n                    const rowKey = \"row-\"+randomString(5);\r\n                    return <tr key={rowKey}>\r\n                        {row.map((col, i)=>{\r\n                            return <td key={rowKey+ \"-\" + i}>{col}</td>\r\n                        })}\r\n                    </tr>\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}","import { BasePage } from \"../BasePage\";\nimport BaseProps from '../../models/BaseProps';\nimport { FormEvent, ReactNode } from \"react\";\nimport { ViewTemplate } from \"../../layout/ViewTemplate\";\nimport { commonWrapper } from './../../utils/commonWrapper';\nimport BaseState from './../../models/BaseState';\nimport { Link } from \"react-router-dom\";\nimport ErrorMessage from './../../components/messages/ErrorMessage';\nimport InfoMessage from './../../components/messages/InfoMessage';\nimport { invokeLater } from './../../utils/eventUtil';\nimport ActionButton from './../../components/buttons/ActionButton';\nimport { CommonTable } from \"../../utils/componentUtil\";\n\nclass State  extends BaseState {\n    username:string            = \"\";\n    password:string         = \"\";\n    loading:boolean         = false;\n    loginSuccess:boolean    = false;\n}\nclass LoginPage extends BasePage<BaseProps, State> {\n    state: Readonly<State> = new State();\n   \n    constructor(props:BaseProps)\n    {\n        super(props, false, \"Login\");\n    }\n    onSubmit = (e:FormEvent) => {\n        console.log(\"ON submit login\");\n        e.preventDefault();\n        this.setState({ loading: true });\n\n        this.authService.login(this.state.username, this.state.password)\n            .then((user) => {\n                this.setState({ error: undefined, loginSuccess: true }, \n                    () => invokeLater(this.handleSuccessLogin, 500) );\n            })\n            .catch((err) => {\n                this.setState({ error: new Error(err?.message) });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            })\n    }\n\n    handleSuccessLogin = () => {\n        if (this.authService.isAdmin) {\n            this.navigate(\"/admin\");\n            return;\n        }\n        this.gotoHomePage();\n    }\n\n    componentDidMount(): void {\n        if (this.authService.loggedIn)\n        {\n            this.navigate(\"/\");\n        }\n        \n    }\n\n    render(): ReactNode {\n        \n        if (this.state.loginSuccess)\n        {\n            return (\n                <ViewTemplate>\n                    <div className=\"pt-5 pb-5 pl-5 pr-5 text-center\">\n                        <InfoMessage >\n                            Login Succes\n                        </InfoMessage> \n                    </div>\n                </ViewTemplate>\n            )\n        }\n        return (\n            <ViewTemplate >\n                <form onSubmit={this.onSubmit} className=\"row mt-3 \">\n                    <div className=\"col-md-4\"/>\n                    <div className=\"col-md-4 bg-light\" style={{padding: 20}}>\n                        \n                        <ErrorMessage show={this.state.error !== undefined}>\n                            {this.state.error?.message}\n                        </ErrorMessage> \n                        <CommonTable\n                            className=\"table table-borderless\"\n                            content={[\n                                [\n                                    \"Username\",\n                                    <input \n                                        id=\"username\"\n                                        name=\"username\"\n                                        value={this.state.username}\n                                        onChange={this.handleInputChange}\n                                        className=\"form-control\" \n                                        required/>            \n                                ],\n                                [\n                                    \"Password\",\n                                    <input \n                                        type=\"password\"\n                                        name=\"password\"\n                                        id=\"password\"\n                                        value={this.state.password}\n                                        onChange={this.handleInputChange}\n                                        className=\"form-control\"\n                                        required/>\n                                ]\n                            ]} />\n                        { this.state.loading? \n                        <i>Please wait...</i> : \n                        <ActionButton type=\"submit\" className=\"btn btn-success mt-3\">\n                            Login\n                        </ActionButton> }\n                        <p className=\"mt-3\">\n                            Don't have account? Contact admin\n                        </p>\n                    </div>\n                </form>\n            </ViewTemplate>\n        )\n    }\n}\n\nexport default commonWrapper(LoginPage)","import React, { Component } from \"react\";\r\nimport { ViewTemplate } from \"../../layout/ViewTemplate\";\r\nimport BaseProps from \"../../models/BaseProps\";\r\nimport { BasePage } from \"../BasePage\";\r\n\r\nclass Props extends BaseProps {\r\n    \r\n    message:string\r\n}\r\nexport class ErrorView extends BasePage<Props, any> {\r\n    constructor(props:Props)\r\n    {\r\n        super(props, false, \"Error\");\r\n    }\r\n    render(): React.ReactNode {\r\n        return (\r\n            <ViewTemplate title=\"Oops !\">\r\n                <div className=\"alert alert-danger mt-3\">\r\n                    <p>{this.props.message}</p>\r\n                </div>    \r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { ViewTemplate } from '../../layout/ViewTemplate'\r\nimport { BasePage } from '../BasePage'\r\n\r\nimport './Home.css'\r\nimport { invokeLater } from './../../utils/eventUtil';\r\nimport BaseState from '../../models/BaseState';\r\nimport BaseProps from '../../models/BaseProps';\r\nimport { commonWrapper } from '../../utils/commonWrapper';\r\nimport Settings from './../../settings';\r\n\r\n\r\nclass State extends BaseState {\r\n\r\n    showTitle: boolean = false;\r\n    welcomingWords: string[] = [];\r\n\r\n}\r\nclass Home extends BasePage<BaseProps, State> {\r\n    state: State = new State();\r\n    welcomingWord: string;\r\n    private _mounted = false;\r\n    get isMounted() { return this._mounted; }\r\n    private set isMounted(val: boolean) { this._mounted = val; }\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.title = \r\n        this.welcomingWord = Settings.App.uiSetting.defaultTitle;\r\n    }\r\n    componentDidMount() {\r\n        this.startDisplayWelcomingWord();\r\n        this.isMounted = true;\r\n    }\r\n    componentWillUnmount() {\r\n        this.isMounted = false;\r\n    }\r\n    startDisplayWelcomingWord = () => {\r\n        if (this.state.welcomingWords.join(\"\") !== this.welcomingWord) {\r\n            invokeLater(() => {\r\n                if (!this.isMounted) {\r\n                    return;\r\n                }\r\n                const words = this.state.welcomingWords;\r\n                words.push(this.welcomingWord[this.welcomingWord.length - (this.welcomingWord.length - words.length)]);\r\n                this.setState({ welcomingWords: words }, this.startDisplayWelcomingWord);\r\n            }, 200);\r\n\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n\r\n    }\r\n\r\n    render(): React.ReactNode {\r\n\r\n        return (\r\n            <ViewTemplate attributes={{ style: { textAlign: 'center', paddingTop: '30vh' } }}>\r\n                <WelcomingWord word={this.state.welcomingWords.join(\"\")} />\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\nconst WelcomingWord = (props: { word: string }) => {\r\n\r\n    return (\r\n        <div\r\n            style={{fontSize: '3em', fontWeight: 'bold'}} \r\n            className='text-primary text-center'>\r\n                {props.word}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default commonWrapper(Home);\r\n\r\n// const Icon = () => {\r\n//     return (\r\n//         <svg className='mb-5' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 600 600\" width=\"200\" height=\"200\">\r\n\r\n//             <circle className='iconStroke strokeDark' fill=\"none\" strokeWidth={190} cx=\"237\" cy=\"310\" r=\"95\" />\r\n//             <circle className='iconStroke strokeOrange' fill=\"none\" strokeWidth={30} cx=\"237\" cy=\"310\" r=\"204.02205763103166\" />\r\n//             <circle className='iconStroke strokeOrange' fill=\"none\" strokeWidth={150} cx=\"362\" cy=\"310\" r=\"75\" />\r\n//             {/* <circle className=\"iconBg\" style={{fill:this.state.orangeBgColor}} strokeWidth={80} cx=\"362\" cy=\"310\" r=\"120\"  /> */}\r\n//             <circle className='iconStroke strokeDark' fill=\"none\" strokeWidth={80} cx=\"362\" cy=\"310\" r=\"187.3846311734236\" />\r\n\r\n//         </svg>\r\n//     );\r\n// }","import { ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../layout/ViewTemplate\";\r\nimport BaseProps from \"../../models/BaseProps\";\r\nimport BaseState from \"../../models/BaseState\";\r\nimport { commonWrapper } from \"../../utils/commonWrapper\";\r\nimport { BasePage } from \"../BasePage\";\r\n\r\nclass Dashboard extends BasePage<BaseProps, BaseState> {\r\n    constructor(props:any)\r\n    {\r\n        super(props, true, \"Dashboard\");\r\n    }\r\n    render(): ReactNode {\r\n        \r\n        return (\r\n            <ViewTemplate title=\"Dashboard\">\r\n                <div className=\"alert alert-success\">Hello, {this.authService.loggedUser?.displayName}</div>\r\n            </ViewTemplate>\r\n        );\r\n    }\r\n}\r\n\r\nexport default commonWrapper(Dashboard);","import { FormEvent, ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../layout/ViewTemplate\";\r\nimport BaseProps from \"../../models/BaseProps\";\r\nimport BaseState from \"../../models/BaseState\";\r\nimport User from \"../../models/User\";\r\nimport { commonWrapper } from \"../../utils/commonWrapper\";\r\nimport { BasePage } from \"../BasePage\";\r\n\r\nclass State extends BaseState {\r\n    user :User = new User()\r\n}\r\nclass EditProfile extends BasePage<BaseProps, State> {\r\n    state = new State();\r\n    constructor(props:BaseProps)\r\n    {\r\n        super(props, false, \"Edit Profile\"); \r\n    }\r\n\r\n    componentDidMount(): void {\r\n        if (this.authService.loggedUser)\r\n            this.setState({user: this.authService.loggedUser})\r\n    }\r\n\r\n    onSubmit = (e:FormEvent) => {\r\n        e.preventDefault();\r\n        this.dialog.showConfirm(\"Update Profile\", \"Save user data?\")\r\n            .then(ok => {\r\n                this.authService.updateProfile(this.state.user)\r\n                    .then(response=>{\r\n                        this.dialog.showInfo(\"Update Success\", \"Profile has been updated\");\r\n                    })\r\n                    .catch(console.error)\r\n            })\r\n            .catch(console.error)\r\n    }\r\n\r\n    render(): ReactNode {\r\n        const user = this.state.user;\r\n        return (\r\n            <ViewTemplate title=\"Edit Profile\" back=\"/dashboard\">\r\n                <form className=\"border border-gray rounded px-3 py-3\" onSubmit={this.onSubmit}>\r\n                    <p>Email</p>\r\n                    <input className=\"form-control\" name=\"user.email\" value={user.email} onChange={this.handleInputChange} />\r\n                    <p>Username</p>\r\n                    <input className=\"form-control\" name=\"user.username\" value={user.username} onChange={this.handleInputChange}/>\r\n                    <p>Display Name</p>\r\n                    <input className=\"form-control\" name=\"user.displayName\" value={user.displayName} onChange={this.handleInputChange}/>\r\n                    <p>Password <i>Leave it empty if you don't want to change it</i></p>\r\n                    <input autoComplete=\"off\" className=\"form-control\" type=\"password\" name=\"user.editPassword\" value={user.editPassword} onChange={this.handleInputChange} />\r\n                    <p/>\r\n                    <input className=\"btn btn-success\" type=\"submit\" value=\"Save\" />\r\n                </form>\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nexport default commonWrapper(EditProfile);","import BaseModel from \"./BaseModel\";\nimport Employee from \"./Employee\";\n\nexport default class SemesterPeriod extends BaseModel {\n    semester: number = 1;\n    year: string;\n\n    active: boolean;\n\n    direktur: Employee;\n    bendahara: Employee;\n    pengawasSekolah: Employee;\n    headHRD: Employee;\n    hearMR: Employee;\n    headRnD: Employee;\n    headLogistic: Employee;\n    headPublicRelation: Employee;\n    headLanguage: Employee;\n    headPesantren: Employee;\n    wakabidTahfiz: Employee;\n    wakabidAsrama: Employee;\n\n    //\n    adminKiis: Employee;\n    adminTahfiz: Employee;\n    adminAsrama: Employee;\n\n    //\n    pjQurban: Employee;\n    pjRamadhan: Employee;\n    pjPromosiPSB: Employee;\n    pjWebMedia: Employee;\n    pjTamuFO: Employee;\n    pjAlumni: Employee;\n    pjUtsUas: Employee;\n    pjEvaluasiPengembanganKurikulum: Employee;\n    pjLabKomputer: Employee;\n    pjLabIPA: Employee;\n    pjLabBahasa: Employee;\n    pjBinaPrestasi: Employee;\n    pjPerpustakaan: Employee;\n    pjBK: Employee;\n    pjBahasaArab: Employee;\n    pjBahasaInggris: Employee;\n    pjUKS: Employee;\n    pjOpkiis: Employee;\n    pjDKM: Employee;\n    pjKesiswaan: Employee;\n    pjKurikulum: Employee;\n\n    public static EmployeeFields = [\n        'direktur', 'bendahara', 'pengawasSekolah', 'headHRD', 'hearMR', 'headRnD', 'headLogistic', 'headPublicRelation', 'headLanguage', 'headPesantren', 'wakabidTahfiz', 'wakabidAsrama', \n        'adminKiis', 'adminTahfiz', 'adminAsrama',\n        'pjQurban', 'pjRamadhan', 'pjPromosiPSB', 'pjWebMedia', 'pjTamuFO', 'pjAlumni', 'pjUtsUas', 'pjEvaluasiPengembanganKurikulum', 'pjLabKomputer', 'pjLabIPA', 'pjLabBahasa', 'pjBinaPrestasi', 'pjPerpustakaan', 'pjBK', 'pjBahasaArab', 'pjBahasaInggris', 'pjUKS', 'pjOpkiis', 'pjDKM', 'pjKesiswaan', 'pjKurikulum'   ];\n}","import { ChangeEvent, Component, FormEvent, ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport SemesterPeriod from '../../../models/SemesterPeriod';\r\nimport Employee from '../../../models/Employee';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport { resolve } from \"inversify-react\";\r\nimport ControlledComponent from \"../../ControlledComponent\";\r\nimport { randomString } from '../../../utils/stringUtil';\r\nimport ToastService from '../../../services/ToastService';\r\nimport SelectEmployeeForm from \"./SelectEmployeeForm\";\r\n\r\nclass State extends BaseMasterDataState<SemesterPeriod> {\r\n\r\n}\r\nclass SemesterPeriodsPage extends BaseMasterDataPage<SemesterPeriod, BaseProps, State> {\r\n\r\n  constructor(props: BaseProps) {\r\n    super(props, \"semesterperiods\", \"Semester Management\");\r\n    this.state = new State();\r\n  }\r\n  get defaultItem(): SemesterPeriod { return new SemesterPeriod() }\r\n  getDataTableHeaderVals(): DataTableHeaderValue[] {\r\n    const employeeFields = SemesterPeriod.EmployeeFields.map(field => {\r\n      return new DataTableHeaderValue(`${field}.user.fullName`, field);\r\n    })\r\n    return [\r\n      new DataTableHeaderValue(\"semester\", \"Semester\"),\r\n      new DataTableHeaderValue(\"year\", \"Year\"),\r\n      new DataTableHeaderValue(\"active\", \"Active\"),\r\n      ...employeeFields\r\n    ]\r\n  }\r\n  setActive = (item: SemesterPeriod) => {\r\n    this.patchAction(item, 'activate');\r\n  }\r\n  setEmployeeInCharge = (item: SemesterPeriod, field: string) => {\r\n    this.dialog.showContent(\"Set \" + field, <SetEmployeeForm field={field} item={item} update={this.update} />);\r\n  }\r\n  employeeCellFields = (item: any) => SemesterPeriod.EmployeeFields.map(field => {\r\n    return (\r\n      <td key={\"emp-field-\" + randomString(10)}>\r\n        <div className=\"row\" style={{ flexWrap: 'nowrap' }}>\r\n          <div className=\"col-3\">\r\n            <ActionButton\r\n              iconClass=\"fas fa-user-edit\"\r\n              className=\"btn btn-sm btn-success me-3\"\r\n              onClick={() => this.setEmployeeInCharge(item, field)} />\r\n          </div>\r\n          <div className=\"col-8 no-wrap\">{item[field]?.user.fullName.trim()}</div>\r\n        </div>\r\n      </td>\r\n    )\r\n  })\r\n\r\n  render(): ReactNode {\r\n\r\n    if (this.state.showForm && this.state.item) {\r\n      return (\r\n        <ViewTemplate title={this.title} back=\"/admin\">\r\n          {this.closeFormButton}\r\n          <FormEdit item={this.state.item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n        </ViewTemplate>\r\n      );\r\n    }\r\n\r\n    const result = this.state.result;\r\n    const items = result?.items;\r\n\r\n    return (\r\n      <ViewTemplate title={this.title} back=\"/admin\">\r\n        {this.showFormButton}\r\n        {result === undefined || items === undefined ?\r\n          <i>Loading...</i> :\r\n          <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{ overflow: 'auto' }}>\r\n            {this.paginationButton}\r\n            <table className=\"commonDataTable table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>No</th>\r\n                  <th>Action</th>\r\n                  {this.getDataTableHeaderComponent()}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, i) => {\r\n                  return (\r\n                    <tr key={\"smt-period-\" + item.id}>\r\n                      <td>{this.startingNumber + i}</td>\r\n                      <td>\r\n                        <div className=\"mx-2\" style={{ display: 'flex', flexWrap: 'nowrap' }}>\r\n                          <ActionButton\r\n                            onClick={() => this.setActive(item)}\r\n                            iconClass=\"fas fa-calendar-check\"\r\n                            className=\"btn-text btn btn-sm text-primary me-1\"\r\n                            disabled={item.active === true} />\r\n                          {this.actionButton(item)}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"text-center\">{item.semester}</td>\r\n                      <td>{item.year}</td>\r\n                      <td>\r\n                        {item.active ? <b className=\"text-success\">active</b> : <i>not active</i>}\r\n                      </td>\r\n                      {this.employeeCellFields(item)}\r\n                    </tr>\r\n                  )\r\n                })}\r\n              </tbody>\r\n              {this.tableFooter}\r\n            </table>\r\n          </form>}\r\n      </ViewTemplate>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default commonWrapper(SemesterPeriodsPage);\r\n\r\nconst FormEdit = (props: {\r\n  item: SemesterPeriod,\r\n  onSubmit: (e: FormEvent) => any,\r\n  handleInputChange: (e: ChangeEvent) => any\r\n}) => {\r\n  const item = props.item;\r\n  return (\r\n    <div className=\"formEditContainer\">\r\n      <form className=\"masterDataForm px-3 py-3 border rounded border-gray\" onSubmit={props.onSubmit}>\r\n        <p>Semester</p>\r\n        <select className=\"form-control\" name=\"item.semester\" id=\"item.semester\" value={item.semester} onChange={props.handleInputChange} required>\r\n          <option>1</option>\r\n          <option>2</option>\r\n        </select>\r\n        <p>Year. <i>example: 2020-2021</i></p>\r\n        <input className=\"form-control\" name=\"item.year\" id=\"item.year\" value={item.year} onChange={props.handleInputChange} required />\r\n\r\n        <p></p>\r\n        <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\ntype SetEmployeeFormProps = { item: SemesterPeriod, field: string, update(item: SemesterPeriod): any };\r\n\r\nclass SetEmployeeForm extends ControlledComponent<SetEmployeeFormProps, any> {\r\n\r\n  onSelect = (employee: Employee) => {\r\n    const item: any = this.props.item;\r\n    item[this.props.field] = employee;\r\n    this.props.update(item);\r\n  }\r\n  \r\n  render() {\r\n     return (\r\n      <SelectEmployeeForm\r\n        onSelect={this.onSelect}\r\n      />\r\n     )\r\n  }\r\n}\r\n","\nimport BaseModel from './BaseModel';\nimport School from './School';\nexport default class ClassLevel extends BaseModel {\n\n    level: number = 1;\n    letter: string = \"A\";\n    description: string = \"\";\n    school: School;\n\n    semester: number = 1;\n    year: string = \"\";\n    semesterActive: boolean;\n    memberCount: number = 0;\n}","\nimport BaseModel from './BaseModel';\nimport User from './User';\nexport default class Student extends BaseModel {\n    nisKiis: string;\n    nisn: string;\n\n    user: User = new User();\n\n    address: string;\n\n    city: string;\n    province: string;\n\n    /**\n     * ===========================\n     * Family\n     * ===========================\n     */\n\n    siblingNum: number;\n    siblingCount: number;\n    // father\n    fatherName: string;\n    fatherBirthDate: Date;\n    fatherBirthPlace: string;\n    fatherEducation: string;\n    fatherPhoneNumber: string;\n    fatherOccupation: string;\n    fatherAddress: string;\n    fatherIncome: number;\n\n    // mother\n    motherName: string;\n    motherBirthDate: Date;\n    motherBirthPlace: string;\n    motherEducation: string;\n    motherPhoneNumber: string;\n    motherOccupation: string;\n    motherAddress: string;\n    motherIncome: number;\n\n    /**\n     * ===========================\n     * Academic\n     * ===========================\n     */\n    originSchool: string;\n    sttbNumber: string;\n    entranceDate: Date;\n    entranceClass: string;\n    transferFrom: string;\n    transferReason: string;\n    entranceCertificateScore: string;\n    leaveSchool: boolean;\n    leaveReason: string;\n\n    educationFinished: boolean;\n\n    graduationDateMts: Date;\n    certificateNumberMts: string;\n    seniorLevelSchool: string;\n\n    graduationDateMa: Date;\n    certificateNumberMa: string;\n\n    /**\n     * =========================\n     * Alumni\n     * =========================\n     */\n    graduationCeremonyDate: Date;\n    highEducationUniv: string;\n    highEducationMajor: string;\n    workDate: Date;\n    workCompany: string;\n\n\n}","\nimport BaseModel from './BaseModel';\nimport Student from './Student';\nimport ClassLevel from './ClassLevel';\nexport default class ClassMember extends BaseModel{\n    student: Student = new Student();\n    classLevel: ClassLevel = new ClassLevel();\n}","\nimport { Component, ReactNode } from 'react';\nimport Student from '../../../models/Student';\nimport ClassLevel from './../../../models/ClassLevel';\nimport ClassMember from './../../../models/ClassMember';\nimport { resolve } from 'inversify-react';\nimport RestClient from './../../../apiClients/RestClient';\nimport ClassMemberService from './../../../services/ClassMemberService';\nimport ControlledComponent from '../../ControlledComponent';\nimport ToastService from './../../../services/ToastService';\nimport MasterDataService from '../../../services/MasterDataService';\nimport ActionButton from '../../../components/buttons/ActionButton';\nimport DialogService from './../../../services/DialogService';\n\ntype Props = {\n    item: ClassLevel,\n}\ntype State = {\n    members: ClassMember[],\n    students: Student[],\n    searchStudent?: string,\n}\n\nexport default class ClassLevelMembersPage extends ControlledComponent<Props, State> {\n    @resolve(ClassMemberService)\n    private service: ClassMemberService;\n    @resolve(MasterDataService)\n    private masterData: MasterDataService;\n    @resolve(ToastService)\n    private toast: ToastService;\n    @resolve(DialogService)\n    private dialog: DialogService;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            members: [],\n            students: [],\n            searchStudent: \"\"\n        }\n    }\n    componentDidMount() {\n        this.loadMembers();\n    }\n    loadMembers = () => {\n        this.service.getMembers(this.props.item.id)\n            .then(response => this.setState({ members: response }))\n            .catch(console.error);\n    }\n    loadStudents = () => {\n        const { searchStudent } = this.state;\n        if (!searchStudent) {\n            return;\n        }\n        this.masterData.list<Student>('students', 0, 10, 'user.fullName', false, 'user.fullName:' + searchStudent)\n            .then(response => {\n                if (response.items.length > 0) {\n                    this.setState({ students: response.items });\n                } else {\n                    this.toast.showDanger(\"Student not found\");\n                }\n            })\n            .catch((e) => this.toast.showDanger(e.message));\n    }\n    closeStudentDropdown = () => this.setState({ students: [] });\n    addStudent = async (student: Student) => {\n        const ok = await this.dialog.showConfirm(\"Add New Student\", `Add ${student.user.fullName} to this class?`);\n        if (!ok) {\n            return;\n        }\n        const member = new ClassMember();\n        member.student = student;\n        member.classLevel = this.props.item;\n\n        this.masterData.post<ClassMember>('classmembers', member)\n            .then(() => {\n                this.toast.showInfo(\"Student has been added\");\n                this.setState({ searchStudent: '' }, this.loadMembers);\n            })\n            .catch((e:any) => this.toast.showDanger(\"Failed to add student: \" + e.message))\n            .finally(this.closeStudentDropdown);\n    }\n    deleteMember = async (member: ClassMember) => {\n        const ok = await this.dialog.showConfirmDanger(\"Remove Student\", `Do you want to remove ${member.student.user.fullName} from class?`);\n        if (!ok) {\n            return;\n        }\n        this.masterData.delete<ClassMember>('classmembers', member.id)\n            .then(() => {\n                this.toast.showInfo(\"Student has been removed\");\n                this.loadMembers();\n            })\n            .catch(console.error);\n    }\n\n    render(): ReactNode {\n        const { students, searchStudent, members } = this.state;\n        const { item } = this.props;\n        return (\n            <div>\n                <h5>Members of {item.level}{item.letter} {item.school?.name}</h5>\n                <p>Period: semester {item.semester}, year {item.year}</p>\n                <form className='mb-3' onSubmit={(e) => {\n                    e.preventDefault();\n                    this.loadStudents();\n                }}>\n                    <p>Add Student</p>\n                    <div className=\"input-group\">\n                        <input \n                            type=\"search\"\n                            className=\"form-control\" \n                            name=\"searchStudent\" \n                            value={searchStudent}\n                            placeholder=\"Full Name\"\n                            onChange={this.handleInputChange} \n                            required \n                        />\n                        <div className=\"input-group-append\">\n                            <input type=\"submit\" className=\"btn btn-primary\" value={\"Search\"}/>\n                        </div>\n                    </div>\n                        \n                    <div style={{ position: 'absolute',width:'75%' }}>\n                        {students.length > 0 ?\n                        <div className=\"bg-light border border-dark px-2 py-1 w-100\" style={{position: 'relative'}}>\n                            <ActionButton \n                                className=\"btn btn-text btn-sm\" \n                                iconClass=\"fas fa-times\" \n                                onClick={this.closeStudentDropdown}\n                                children=\"Close\"\n                            />\n                            <div style={{overflowY:'auto', height: '100px'}}>\n                                <div className=\"no-wrap\" style={{ width: 'max-content' }}>\n                                    {students.map(e => {\n                                        return (\n                                            <div className='d-flex my-1' style={{ alignItems: 'center' }} key={\"set-emp-\"+e.id}>\n                                                <ActionButton\n                                                    iconClass='fas fa-plus-circle'\n                                                    className='me-2 btn btn-info btn-sm btn-text' \n                                                    onClick={() => this.addStudent(e)}\n                                                />\n                                                <span>{e.nisKiis} - {e.user.fullName.trim()}</span>\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n                        </div> : null }\n\n                    </div>\n                \n                </form>\n                <h5>Member List</h5>\n                <table className='table table-striped'>\n                    <thead>\n                        <tr>\n                            <td>No</td>\n                            <td>Nis Kiis</td>\n                            <td>Name</td>\n                            <td></td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {members.map((member, i) => {\n                            return (\n                                <tr key={`member-${member.id}`}>\n                                    <td>{i + 1}</td>\n                                    <td>{member.student.nisKiis}</td>\n                                    <td>{member.student.user.fullName}</td>\n                                    <td>\n                                        <ActionButton \n                                            className='btn btn-text text-danger' \n                                            onClick={() => this.deleteMember(member)}\n                                            iconClass=\"fas fa-minus-circle\"\n                                        >\n                                            Remove\n                                        </ActionButton>\n                                    </td>\n                                </tr>\n                            )\n                        })}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n\n\n}","import { ChangeEvent, FormEvent, ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport ClassLevel from \"../../../models/ClassLevel\";\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport School from '../../../models/School';\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport ClassLevelMembersPage from './ClassLevelMembersPage';\r\n\r\nclass State extends BaseMasterDataState<ClassLevel> {\r\n    showEditMember: boolean\r\n}\r\nclass ClassLevelsPage extends BaseMasterDataPage<ClassLevel, BaseProps, State> {\r\n    schools:School[] = [];\r\n    constructor(props: BaseProps) {\r\n        super(props, \"classlevels\", \"Class Level Management\");\r\n        this.state = new State();\r\n    }\r\n    get defaultItem(): ClassLevel { return new ClassLevel() }\r\n    getDataTableHeaderVals(): DataTableHeaderValue[] {\r\n        return [\r\n            new DataTableHeaderValue(\"level\", \"Level\"),\r\n            new DataTableHeaderValue(\"letter\", \"Letter\"),\r\n            new DataTableHeaderValue(\"school.name\", \"School\"),\r\n            new DataTableHeaderValue(\"description\", \"Description\"),\r\n            new DataTableHeaderValue(\"semesterPeriod.semester\", \"Semester\"),\r\n            new DataTableHeaderValue(\"semesterPeriod.year\", \"Year\"),\r\n            new DataTableHeaderValue(null, \"Member\", false),\r\n            new DataTableHeaderValue(\"semesterPeriod.active\", \"Semester Active\", true, false),\r\n        ]\r\n    }\r\n\r\n    edit = (model:ClassLevel) => {\r\n        this.service.list<School>('schools', 0, -1)\r\n            .then((response) => {\r\n                this.schools = response.items ?? [];\r\n                if (this.schools.length === 0) {\r\n                    this.dialog.showError(\"No School Record\", \"Failed when getting school data\");\r\n                    return;\r\n                }\r\n                if (!model.school) {\r\n                    model.school = this.schools[0];\r\n                }\r\n                this.setState({item: model}, this.showForm);\r\n            })\r\n            .catch((e) => this.dialog.showError(\"Failed to Read School Data\", e));\r\n    }\r\n\r\n    showInsertForm = () => this.edit(this.defaultItem);\r\n    showEditMemberForm = (item: ClassLevel) => this.setState({ item: item, showEditMember: true });\r\n    closeEditMemberForm = () => {\r\n        this.setState({ showEditMember: false }, this.resetFormAndClose);\r\n    }\r\n    render(): ReactNode {\r\n        if (this.state.showEditMember && this.state.item) {\r\n            return (\r\n                <ViewTemplate title={this.title} back=\"/admin\">\r\n                   <ActionButton onClick={this.closeEditMemberForm} iconClass=\"fas fa-times\" className=\"btn btn-secondary btn-sm mx-2\">\r\n                        Close form\r\n                    </ActionButton>\r\n                    <ClassLevelMembersPage item={this.state.item} />\r\n                </ViewTemplate>\r\n            )\r\n        }\r\n        if (this.state.showForm && this.state.item && this.schools.length > 0)  {\r\n            return (\r\n                <ViewTemplate title={this.title} back=\"/admin\">\r\n                    {this.closeFormButton}\r\n                    <FormEdit item={this.state.item} schools={this.schools} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n                </ViewTemplate>\r\n            );\r\n        }\r\n        \r\n        const result = this.state.result;\r\n        const items = result?.items;\r\n        return (\r\n            <ViewTemplate title={this.title} back=\"/admin\">\r\n                {this.showFormButton}\r\n                {result === undefined || items === undefined ?\r\n                    <i>Loading...</i> :\r\n                    <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{overflow: 'auto'}}>\r\n                       {this.paginationButton}\r\n                        <table className=\"commonDataTable table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>No</th>\r\n                                    {this.getDataTableHeaderComponent()}\r\n                                    <th>Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {items.map((item, i) => {\r\n                                    return (\r\n                                        <tr key={\"ClassLevel-\" + item.id}>\r\n                                            <td>{this.startingNumber + i}</td>\r\n                                            <td>{item.level}</td>\r\n                                            <td>{item.letter}</td>\r\n                                            <td>{item.school.name}</td>\r\n                                            <td>{item.description}</td>\r\n                                            <td>{item.semester}</td>\r\n                                            <td>{item.year}</td>\r\n                                            <td>\r\n                                                {item.memberCount}\r\n                                                <ActionButton \r\n                                                    className=\"btn btn-text btn-sm\" \r\n                                                    iconClass=\"fas fa-edit\" \r\n                                                    onClick={() => this.showEditMemberForm(item)} \r\n                                                />\r\n                                            </td>\r\n                                            <td>{item.semesterActive ? \r\n                                                <b className=\"text-success\">active</b> : <i>not active</i>}\r\n                                            </td>\r\n                                            <td>\r\n                                                {item.semesterActive ? this.actionButton(item) : null}\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                            {this.tableFooter}\r\n                        </table>\r\n                    </form>}\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nexport default commonWrapper(ClassLevelsPage);\r\n\r\nconst FormEdit = (props:{\r\n    item:ClassLevel, \r\n    schools:School[],\r\n    onSubmit:(e:FormEvent) => any, \r\n    handleInputChange:(e:ChangeEvent)=>any\r\n}) => {\r\n    const { item, onSubmit, handleInputChange } = props;\r\n    const setSchool = (school:School) => {\r\n        item.school = school;\r\n    }\r\n    return (\r\n        <div className=\"formEditContainer\">\r\n            <form className=\"masterDataForm px-3 py-3 border rounded border-gray\"  onSubmit={onSubmit}>\r\n                <p>Level</p>\r\n                <input className=\"form-control\" name=\"item.level\" id=\"item.level\" value={item.level} type=\"number\" required onChange={handleInputChange} />\r\n                <p>Letter</p>\r\n                <input className=\"form-control\" name=\"item.letter\" id=\"item.letter\" value={item.letter} onChange={handleInputChange} required />\r\n                <p>School</p>\r\n                <select className=\"form-control\" required>\r\n                    {props.schools.map((school)=>{\r\n                        return (\r\n                            <option key={\"select-class-school-\"+school.id} onClick={()=>setSchool(school)}>\r\n                                {school.name}\r\n                            </option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                <p>Semester</p>\r\n                <input className=\"form-control\" name=\"item.semester\" id=\"item.semester\" value={item.semester} type=\"number\" required onChange={props.handleInputChange} />\r\n                <p>Year</p>\r\n                <input className=\"form-control\" name=\"item.year\" id=\"item.year\" value={item.year} onChange={props.handleInputChange} required />\r\n\r\n                <p></p>\r\n                <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import { ChangeEvent, Component, FormEvent, ReactNode } from \"react\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport Student from \"../../../models/Student\";\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport { getInputReadableDate } from \"../../../utils/stringUtil\";\r\n\r\nclass State extends BaseMasterDataState<Student> {\r\n\r\n}\r\nclass StudentsPage extends BaseMasterDataPage<Student, BaseProps, State> {\r\n    \r\n    constructor(props: BaseProps) {\r\n        super(props, \"students\", \"Student Management\");\r\n        this.state = new State();\r\n    }\r\n    get defaultItem(): Student { return new Student() }\r\n    getDataTableHeaderVals(): DataTableHeaderValue[] {\r\n        return [\r\n            new DataTableHeaderValue(\"nisKiis\"),\r\n            new DataTableHeaderValue(\"nisn\"),\r\n            new DataTableHeaderValue(\"user.fullName\",),\r\n            new DataTableHeaderValue(\"user.birthDate\"),\r\n            new DataTableHeaderValue(\"user.birthPlace\"),\r\n            new DataTableHeaderValue(\"address\"),\r\n            new DataTableHeaderValue(\"city\"),\r\n            new DataTableHeaderValue(\"province\"),\r\n            new DataTableHeaderValue(\"siblingNum\"),\r\n            new DataTableHeaderValue(\"siblingCount\"),\r\n            new DataTableHeaderValue(\"fatherName\"),\r\n            new DataTableHeaderValue(\"fatherBirthDate\"),\r\n            new DataTableHeaderValue(\"fatherBirthPlace\"),\r\n            new DataTableHeaderValue(\"fatherEducation\"),\r\n            new DataTableHeaderValue(\"fatherPhoneNumber\"),\r\n            new DataTableHeaderValue(\"fatherOccupation\"),\r\n            new DataTableHeaderValue(\"fatherAddress\"),\r\n            new DataTableHeaderValue(\"fatherIncome\"),\r\n            new DataTableHeaderValue(\"motherName\"),\r\n            new DataTableHeaderValue(\"motherBirthDate\"),\r\n            new DataTableHeaderValue(\"motherBirthPlace\"),\r\n            new DataTableHeaderValue(\"motherEducation\"),\r\n            new DataTableHeaderValue(\"motherPhoneNumber\"),\r\n            new DataTableHeaderValue(\"motherOccupation\"),\r\n            new DataTableHeaderValue(\"motherAddress\"),\r\n            new DataTableHeaderValue(\"motherIncome\"),\r\n            new DataTableHeaderValue(\"originSchool\"),\r\n            new DataTableHeaderValue(\"sttbNumber\"),\r\n            new DataTableHeaderValue(\"entranceDate\"),\r\n            new DataTableHeaderValue(\"entranceClass\"),\r\n            new DataTableHeaderValue(\"transferFrom\"),\r\n            new DataTableHeaderValue(\"transferReason\"),\r\n            new DataTableHeaderValue(\"entranceCertificateScore\"),\r\n            new DataTableHeaderValue(\"leaveSchool\"),\r\n            new DataTableHeaderValue(\"leaveReason\"),\r\n            new DataTableHeaderValue(\"educationFinished\"),\r\n            new DataTableHeaderValue(\"graduationDateMts\"),\r\n            new DataTableHeaderValue(\"certificateNumberMts\"),\r\n            new DataTableHeaderValue(\"seniorLevelSchool\"),\r\n            new DataTableHeaderValue(\"graduationDateMa\"),\r\n            new DataTableHeaderValue(\"certificateNumberMa\"),\r\n            new DataTableHeaderValue(\"graduationCeremonyDate\"),\r\n            new DataTableHeaderValue(\"highEducationUniv\"),\r\n            new DataTableHeaderValue(\"highEducationMajor\"),\r\n            new DataTableHeaderValue(\"workDate\"),\r\n            new DataTableHeaderValue(\"workCompany\"),\r\n        ]\r\n    }\r\n    \r\n    render(): ReactNode {\r\n\r\n        if (this.state.showForm && this.state.item)  {\r\n            return (\r\n                <ViewTemplate title={this.title} back=\"/admin\">\r\n                    {this.closeFormButton}\r\n                    <FormEdit item={this.state.item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n                </ViewTemplate>\r\n            );\r\n        }\r\n        \r\n        const result = this.state.result;\r\n        const items = result?.items;\r\n        return (\r\n            <ViewTemplate title={this.title} back=\"/admin\">\r\n                {this.showFormButton}\r\n                {result === undefined || items === undefined ?\r\n                    <i>Loading...</i> :\r\n                    <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{overflow: 'auto'}}>\r\n                       {this.paginationButton}\r\n                        <table className=\"commonDataTable table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>No</th>\r\n                                    {this.getDataTableHeaderComponent()}\r\n                                    <th>Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {items.map((item, i) => {\r\n                                    return (\r\n                                        <tr key={\"Student-\" + item.id}>\r\n                                            <td>{this.startingNumber + i}</td>\r\n                                            <td>{item.nisKiis}</td>\r\n                                            <td>{item.nisn}</td>\r\n                                            <td>{item.user.fullName}</td>\r\n                                            <td>{new Date(item.user.birthDate).toLocaleDateString()}</td>\r\n                                            <td>{item.user.birthPlace}</td>\r\n                                            <td>{item.address}</td>\r\n                                            <td>{item.city}</td>\r\n                                            <td>{item.province}</td>\r\n                                            <td>{item.siblingNum}</td>\r\n                                            <td>{item.siblingCount}</td>\r\n                                            <td>{item.fatherName}</td>\r\n                                            <td>{new Date(item.fatherBirthDate).toLocaleDateString()}</td>\r\n                                            <td>{item.fatherBirthPlace}</td>\r\n                                            <td>{item.fatherEducation}</td>\r\n                                            <td>{item.fatherPhoneNumber}</td>\r\n                                            <td>{item.fatherOccupation}</td>\r\n                                            <td>{item.fatherAddress}</td>\r\n                                            <td>{item.fatherIncome}</td>\r\n                                            <td>{item.motherName}</td>\r\n                                            <td>{new Date(item.motherBirthDate).toLocaleDateString()}</td>\r\n                                            <td>{item.motherBirthPlace}</td>\r\n                                            <td>{item.motherEducation}</td>\r\n                                            <td>{item.motherPhoneNumber}</td>\r\n                                            <td>{item.motherOccupation}</td>\r\n                                            <td>{item.motherAddress}</td>\r\n                                            <td>{item.motherIncome}</td>\r\n                                            <td>{item.originSchool}</td>\r\n                                            <td>{item.sttbNumber}</td>\r\n                                            <td>{new Date(item.entranceDate).toLocaleDateString()}</td>\r\n                                            <td>{item.entranceClass}</td>\r\n                                            <td>{item.transferFrom}</td>\r\n                                            <td>{item.transferReason}</td>\r\n                                            <td>{item.entranceCertificateScore}</td>\r\n                                            <td>{item.leaveSchool ? \"True\" : \"False\"}</td>\r\n                                            <td>{item.leaveReason}</td>\r\n                                            <td>{item.educationFinished ? \"True\" : \"False\"}</td>\r\n                                            <td>{new Date(item.graduationDateMts).toLocaleDateString()}</td>\r\n                                            <td>{item.certificateNumberMts}</td>\r\n                                            <td>{item.seniorLevelSchool}</td>\r\n                                            <td>{new Date(item.graduationDateMa).toLocaleDateString()}</td>\r\n                                            <td>{item.certificateNumberMa}</td>\r\n                                            <td>{new Date(item.graduationCeremonyDate).toLocaleDateString()}</td>\r\n                                            <td>{item.highEducationUniv}</td>\r\n                                            <td>{item.highEducationMajor}</td>\r\n                                            <td>{new Date(item.workDate).toLocaleDateString()}</td>\r\n                                            <td>{item.workCompany}</td>\r\n\r\n                                            <td>\r\n                                                {this.actionButton(item)}\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                            {this.tableFooter}\r\n                        </table>\r\n                    </form>}\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nexport default commonWrapper(StudentsPage);\r\n\r\nconst FormEdit = (props:{\r\n    item:Student, \r\n    onSubmit:(e:FormEvent) => any, \r\n    handleInputChange:(e:ChangeEvent)=>any\r\n}) => {\r\n    const item      = props.item;\r\n    const onChange  = props.handleInputChange;\r\n    return (\r\n        <div className=\"formEditContainer\">\r\n            <form className=\"masterDataForm px-3 py-3 border rounded border-gray\"  onSubmit={props.onSubmit}>\r\n                <p>Full Name</p>\r\n                <input className=\"form-control\" id=\"item.user.fullName\" name=\"item.user.fullName\" value={item.user.fullName}  onChange={onChange} required/>\r\n                <p>Email</p>\r\n                <input className=\"form-control\" id=\"item.user.email\" name=\"item.user.email\" type=\"email\" value={item.user.email}  onChange={onChange} required/>\r\n                <p>Gender</p>\r\n                <select className=\"form-control\" value={item.user.gender} id=\"item.user.gender\" name=\"item.user.gender\" onChange={onChange} required>\r\n                    <option  >MALE</option>\r\n                    <option  >FEMALE</option>\r\n                </select>\r\n                <p>Birth Date</p>\r\n                <input type=\"date\" className=\"form-control\" id=\"item.user.birthDate\" name=\"item.user.birthDate\" value={getInputReadableDate(new Date(item.user.birthDate))} onChange={onChange} required/>\r\n                <p>Birth Place</p>\r\n                <input className=\"form-control\" id=\"item.user.birthPlace\" name=\"item.user.birthPlace\" value={item.user.birthPlace} onChange={onChange} required/>\r\n                <p>nisKiis</p>\r\n                <input required placeholder=\"nisKiis\" className=\"form-control\" name=\"item.nisKiis\" id=\"item.nisKiis\" value={item.nisKiis} onChange={onChange}/>\r\n                <p>nisn</p>\r\n                <input required placeholder=\"nisn\" className=\"form-control\" name=\"item.nisn\" id=\"item.nisn\" value={item.nisn} onChange={onChange}/>\r\n                <p>address</p>\r\n                <textarea required placeholder=\"address\" className=\"form-control\" name=\"item.address\" id=\"item.address\" value={item.address} onChange={onChange}/>\r\n                <p>city</p>\r\n                <input required placeholder=\"city\" className=\"form-control\" name=\"item.city\" id=\"item.city\" value={item.city} onChange={onChange}/>\r\n                <p>province</p>\r\n                <input required placeholder=\"province\" className=\"form-control\" name=\"item.province\" id=\"item.province\" value={item.province} onChange={onChange}/>\r\n                <p>siblingNum</p>\r\n                <input type=\"number\" placeholder=\"siblingNum\" className=\"form-control\" name=\"item.siblingNum\" id=\"item.siblingNum\" value={item.siblingNum} onChange={onChange}/>\r\n                <p>siblingCount</p>\r\n                <input type=\"number\" placeholder=\"siblingCount\" className=\"form-control\" name=\"item.siblingCount\" id=\"item.siblingCount\" value={item.siblingCount} onChange={onChange}/>\r\n                <p>fatherName</p>\r\n                <input placeholder=\"fatherName\" className=\"form-control\" name=\"item.fatherName\" id=\"item.fatherName\" value={item.fatherName} onChange={onChange}/>\r\n                <p>fatherBirthDate</p>\r\n                <input placeholder=\"fatherBirthDate\" className=\"form-control\" name=\"item.fatherBirthDate\" id=\"item.fatherBirthDate\" type=\"date\" value={getInputReadableDate(new Date(item.fatherBirthDate))} onChange={onChange}/>\r\n                <p>fatherBirthPlace</p>\r\n                <input placeholder=\"fatherBirthPlace\" className=\"form-control\" name=\"item.fatherBirthPlace\" id=\"item.fatherBirthPlace\" value={item.fatherBirthPlace} onChange={onChange}/>\r\n                <p>fatherEducation</p>\r\n                <input placeholder=\"fatherEducation\" className=\"form-control\" name=\"item.fatherEducation\" id=\"item.fatherEducation\" value={item.fatherEducation} onChange={onChange}/>\r\n                <p>fatherPhoneNumber</p>\r\n                <input placeholder=\"fatherPhoneNumber\" className=\"form-control\" name=\"item.fatherPhoneNumber\" id=\"item.fatherPhoneNumber\" value={item.fatherPhoneNumber} onChange={onChange}/>\r\n                <p>fatherOccupation</p>\r\n                <input placeholder=\"fatherOccupation\" className=\"form-control\" name=\"item.fatherOccupation\" id=\"item.fatherOccupation\" value={item.fatherOccupation} onChange={onChange}/>\r\n                <p>fatherAddress</p>\r\n                <textarea placeholder=\"fatherAddress\" className=\"form-control\" name=\"item.fatherAddress\" id=\"item.fatherAddress\" value={item.fatherAddress} onChange={onChange}/>\r\n                <p>fatherIncome</p>\r\n                <input type=\"number\" placeholder=\"fatherIncome\" className=\"form-control\" name=\"item.fatherIncome\" id=\"item.fatherIncome\" value={item.fatherIncome} onChange={onChange}/>\r\n                <p>motherName</p>\r\n                <input placeholder=\"motherName\" className=\"form-control\" name=\"item.motherName\" id=\"item.motherName\" value={item.motherName} onChange={onChange}/>\r\n                <p>motherBirthDate</p>\r\n                <input placeholder=\"motherBirthDate\" className=\"form-control\" name=\"item.motherBirthDate\" id=\"item.motherBirthDate\" type=\"date\" value={getInputReadableDate(new Date(item.motherBirthDate))} onChange={onChange}/>\r\n                <p>motherBirthPlace</p>\r\n                <input placeholder=\"motherBirthPlace\" className=\"form-control\" name=\"item.motherBirthPlace\" id=\"item.motherBirthPlace\" value={item.motherBirthPlace} onChange={onChange}/>\r\n                <p>motherEducation</p>\r\n                <input placeholder=\"motherEducation\" className=\"form-control\" name=\"item.motherEducation\" id=\"item.motherEducation\" value={item.motherEducation} onChange={onChange}/>\r\n                <p>motherPhoneNumber</p>\r\n                <input placeholder=\"motherPhoneNumber\" className=\"form-control\" name=\"item.motherPhoneNumber\" id=\"item.motherPhoneNumber\" value={item.motherPhoneNumber} onChange={onChange}/>\r\n                <p>motherOccupation</p>\r\n                <input placeholder=\"motherOccupation\" className=\"form-control\" name=\"item.motherOccupation\" id=\"item.motherOccupation\" value={item.motherOccupation} onChange={onChange}/>\r\n                <p>motherAddress</p>\r\n                <textarea placeholder=\"motherAddress\" className=\"form-control\" name=\"item.motherAddress\" id=\"item.motherAddress\" value={item.motherAddress} onChange={onChange}/>\r\n                <p>motherIncome</p>\r\n                <input type=\"number\" placeholder=\"motherIncome\" className=\"form-control\" name=\"item.motherIncome\" id=\"item.motherIncome\" value={item.motherIncome} onChange={onChange}/>\r\n                <p>originSchool</p>\r\n                <input placeholder=\"originSchool\" className=\"form-control\" name=\"item.originSchool\" id=\"item.originSchool\" value={item.originSchool} onChange={onChange}/>\r\n                <p>sttbNumber</p>\r\n                <input placeholder=\"sttbNumber\" className=\"form-control\" name=\"item.sttbNumber\" id=\"item.sttbNumber\" value={item.sttbNumber} onChange={onChange}/>\r\n                <p>entranceDate</p>\r\n                <input placeholder=\"entranceDate\" className=\"form-control\" name=\"item.entranceDate\" id=\"item.entranceDate\" type=\"date\" value={getInputReadableDate(new Date(item.entranceDate))} onChange={onChange}/>\r\n                <p>entranceClass</p>\r\n                <input placeholder=\"entranceClass\" className=\"form-control\" name=\"item.entranceClass\" id=\"item.entranceClass\" value={item.entranceClass} onChange={onChange}/>\r\n                <p>transferFrom</p>\r\n                <input placeholder=\"transferFrom\" className=\"form-control\" name=\"item.transferFrom\" id=\"item.transferFrom\" value={item.transferFrom} onChange={onChange}/>\r\n                <p>transferReason</p>\r\n                <input placeholder=\"transferReason\" className=\"form-control\" name=\"item.transferReason\" id=\"item.transferReason\" value={item.transferReason} onChange={onChange}/>\r\n                <p>entranceCertificateScore</p>\r\n                <input placeholder=\"entranceCertificateScore\" className=\"form-control\" name=\"item.entranceCertificateScore\" id=\"item.entranceCertificateScore\" value={item.entranceCertificateScore} onChange={onChange}/>\r\n                \r\n                <div className=\"form-check\">\r\n                    <input placeholder=\"leaveSchool\" className=\"form-check-input\" name=\"item.leaveSchool\" id=\"item.leaveSchool\" type=\"checkbox\" checked={item.leaveSchool} onChange={onChange} />\r\n                    <label className=\"form-check-label\">\r\n                        Leave School\r\n                    </label>\r\n                </div>\r\n                \r\n                <p>leaveReason</p>\r\n                <textarea placeholder=\"leaveReason\" className=\"form-control\" name=\"item.leaveReason\" id=\"item.leaveReason\" value={item.leaveReason} onChange={onChange}/>\r\n                <div className=\"form-check\">\r\n                    <input placeholder=\"educationFinished\" className=\"form-check-input\" name=\"item.educationFinished\" id=\"item.educationFinished\" type=\"checkbox\" checked={item.educationFinished} onChange={onChange}/>    \r\n                    <label className=\"form-check-label\">\r\n                        Education Finished\r\n                    </label>\r\n                </div>\r\n                <p>graduationDateMts</p>\r\n                <input placeholder=\"graduationDateMts\" className=\"form-control\" name=\"item.graduationDateMts\" id=\"item.graduationDateMts\" type=\"date\" value={getInputReadableDate(new Date(item.graduationDateMts))} onChange={onChange}/>\r\n                <p>certificateNumberMts</p>\r\n                <input placeholder=\"certificateNumberMts\" className=\"form-control\" name=\"item.certificateNumberMts\" id=\"item.certificateNumberMts\" value={item.certificateNumberMts} onChange={onChange}/>\r\n                <p>seniorLevelSchool</p>\r\n                <input placeholder=\"seniorLevelSchool\" className=\"form-control\" name=\"item.seniorLevelSchool\" id=\"item.seniorLevelSchool\" value={item.seniorLevelSchool} onChange={onChange}/>\r\n                <p>graduationDateMa</p>\r\n                <input placeholder=\"graduationDateMa\" className=\"form-control\" name=\"item.graduationDateMa\" id=\"item.graduationDateMa\" type=\"date\" value={getInputReadableDate(new Date(item.graduationDateMa))} onChange={onChange}/>\r\n                <p>certificateNumberMa</p>\r\n                <input placeholder=\"certificateNumberMa\" className=\"form-control\" name=\"item.certificateNumberMa\" id=\"item.certificateNumberMa\" value={item.certificateNumberMa} onChange={onChange}/>\r\n                <p>graduationCeremonyDate</p>\r\n                <input placeholder=\"graduationCeremonyDate\" className=\"form-control\" name=\"item.graduationCeremonyDate\" id=\"item.graduationCeremonyDate\" type=\"date\" value={getInputReadableDate(new Date(item.graduationCeremonyDate))} onChange={onChange}/>\r\n                <p>highEducationUniv</p>\r\n                <input placeholder=\"highEducationUniv\" className=\"form-control\" name=\"item.highEducationUniv\" id=\"item.highEducationUniv\" value={item.highEducationUniv} onChange={onChange}/>\r\n                <p>highEducationMajor</p>\r\n                <input placeholder=\"highEducationMajor\" className=\"form-control\" name=\"item.highEducationMajor\" id=\"item.highEducationMajor\" value={item.highEducationMajor} onChange={onChange}/>\r\n                <p>workDate</p>\r\n                <input placeholder=\"workDate\" className=\"form-control\" name=\"item.workDate\" id=\"item.workDate\" type=\"date\" value={getInputReadableDate(new Date(item.workDate))} onChange={onChange}/>\r\n                <p>workCompany</p>\r\n                <input placeholder=\"workCompany\" className=\"form-control\" name=\"item.workCompany\" id=\"item.workCompany\" value={item.workCompany} onChange={onChange}/>\r\n\r\n                <p></p>\r\n                <input className=\"btn btn-primary\" value=\"Save\" type=\"submit\" />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import { resolve } from \"inversify-react\";\r\nimport { ChangeEvent, FormEvent, ReactNode } from \"react\";\r\nimport ActionButton from \"../../../components/buttons/ActionButton\";\r\nimport { ViewTemplate } from \"../../../layout/ViewTemplate\";\r\nimport BaseMasterDataState from '../../../models/BaseMasterDataState';\r\nimport BaseProps from '../../../models/BaseProps';\r\nimport ClassLevel from '../../../models/ClassLevel';\r\nimport ClassMember from \"../../../models/ClassMember\";\r\nimport DataTableHeaderValue from \"../../../models/DataTableHeaderValue\";\r\nimport Student from '../../../models/Student';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport ToastService from '../../../services/ToastService';\r\nimport { commonWrapper } from \"../../../utils/commonWrapper\";\r\nimport ControlledComponent from \"../../ControlledComponent\";\r\nimport ClassMemberService from './../../../services/ClassMemberService';\r\nimport BaseMasterDataPage from \"./BaseMasterDataPage\";\r\n\r\nclass State extends BaseMasterDataState<ClassMember> {\r\n\r\n}\r\nclass ClassMembersPage extends BaseMasterDataPage<ClassMember, BaseProps, State> {    \r\n    constructor(props: BaseProps) {\r\n        super(props, \"classmembers\", \"Class Member Management\");\r\n        this.state = new State();\r\n    }\r\n    get defaultItem(): ClassMember { return new ClassMember() }\r\n    getDataTableHeaderVals(): DataTableHeaderValue[] {\r\n        return [\r\n            new DataTableHeaderValue(\"student.nisKiis\", \"Nis Kiis\"),\r\n            new DataTableHeaderValue(\"student.user.fullName\", \"Name\"),\r\n            new DataTableHeaderValue(\"classLevel.level\", \"Class\"),\r\n            new DataTableHeaderValue(\"classLevel.letter\", \"Letter\"),\r\n            new DataTableHeaderValue(\"classLevel.school.name\", \"School\"),\r\n            new DataTableHeaderValue(\"classLevel.semesterPeriod.semester\", \"Semester\"),\r\n            new DataTableHeaderValue(\"classLevel.semesterPeriod.year\", \"Year\"),\r\n            new DataTableHeaderValue(\"classLevel.semesterPeriod.active\", \"Semester Active\", true, false),\r\n        ]\r\n    }\r\n    \r\n    render(): ReactNode {\r\n\r\n        if (this.state.showForm && this.state.item)  {\r\n            return (\r\n                <ViewTemplate title={this.title} back=\"/admin\">\r\n                    {this.closeFormButton}\r\n                    <FormEdit item={this.state.item} handleInputChange={this.handleInputChange} onSubmit={this.formEditSubmit} />\r\n                </ViewTemplate>\r\n            );\r\n        }\r\n        \r\n        const { result } = this.state;\r\n        const items = result?.items;\r\n        return (\r\n            <ViewTemplate title={this.title} back=\"/admin\">\r\n                {this.showFormButton}\r\n                {result === undefined || items === undefined ?\r\n                    <i>Loading...</i> :\r\n                    <form onSubmit={this.loadFromForm} className=\"mt-5 pl-3 pr-3\" style={{overflow: 'auto'}}>\r\n                       {this.paginationButton}\r\n                        <table className=\"commonDataTable table table-striped\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>No</th>\r\n                                    {this.getDataTableHeaderComponent()}\r\n                                    <th>Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {items.map((item, i) => {\r\n                                    const { classLevel, student } = item;\r\n                                    return (\r\n                                        <tr key={\"ClassMember-\" + item.id}>\r\n                                            <td>{this.startingNumber + i}</td>\r\n                                            <td>{student.nisKiis}</td>\r\n                                            <td>{student.user.fullName}</td>\r\n                                            <td>{classLevel.level}</td>\r\n                                            <td>{classLevel.letter}</td>\r\n                                            <td>{classLevel.school.name}</td>\r\n                                            <td>{classLevel.semester}</td>\r\n                                            <td>{classLevel.year}</td>\r\n                                            <td>\r\n                                                {classLevel.semesterActive ? <b className=\"text-success\">active</b> : <i>not active</i>}\r\n                                            </td>\r\n                                            <td>\r\n                                                {classLevel.semesterActive ? this.actionButton(item) : null}\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                            {this.tableFooter}\r\n                        </table>\r\n                    </form>}\r\n            </ViewTemplate>\r\n        )\r\n    }\r\n}\r\n\r\nexport default commonWrapper(ClassMembersPage);\r\ntype FormEditProps = {\r\n    item:ClassMember, \r\n    onSubmit:(e: FormEvent) => any, \r\n    handleInputChange:(e:ChangeEvent)=>any\r\n};\r\ntype FormEditState = {\r\n    students: Student[];\r\n    classes: ClassLevel[];\r\n\r\n    searchStudent?: string;\r\n}\r\nclass FormEdit extends ControlledComponent<FormEditProps, FormEditState> {\r\n    @resolve(MasterDataService)\r\n    private masterDataService: MasterDataService;\r\n    @resolve(ClassMemberService)\r\n    private classMemberService: ClassMemberService;\r\n    @resolve(ToastService)\r\n    private toast: ToastService;\r\n\r\n    constructor(props:FormEditProps) {\r\n        super(props);\r\n        this.state = {\r\n            students: [],\r\n            classes: [],\r\n            searchStudent: props.item?.student?.user?.fullName\r\n        };\r\n    }\r\n\r\n    componentDidMount() { this.loadClasses(); }\r\n\r\n    loadClasses = () => {\r\n        this.classMemberService.getActiveClasses()\r\n            .then(this.handleClassLoaded)\r\n            .catch(() => this.toast.showDanger(\"Failed to load classes\"));\r\n    }\r\n\r\n    handleClassLoaded = (classes: ClassLevel[]) => {\r\n        if (!classes || classes.length === 0) {\r\n            this.toast.showDanger(\"No class found this semester\");\r\n            return;\r\n        }\r\n        this.props.item.classLevel = classes[0];\r\n        this.setState({ classes: classes });\r\n    }\r\n\r\n    loadStudents = () => {\r\n        const search = this.state.searchStudent;\r\n        if (!search) {\r\n            return;\r\n        }\r\n        this.masterDataService.list<Student>('students', 0, 10, 'user.fullName', false, 'user.fullName:' + search)\r\n            .then(response => this.handleStudentLoaded(response.items))\r\n            .catch((e) => this.toast.showDanger(\"Failed to load students\"));\r\n    }\r\n    handleStudentLoaded = (items:Student[]) => {\r\n        if (!items || items.length === 0) {\r\n            this.toast.showDanger(\"No student containing name \\\"\" + this.state.searchStudent + \"\\\" was found\");\r\n            return;\r\n        }\r\n        this.setState({ students: items });\r\n    }\r\n    \r\n    closeStudentDropdown = () => this.setState({ students: [] });\r\n    setSelectedStudent = (item:Student) => {\r\n        this.props.item.student = item;\r\n        this.setState({ searchStudent: item.user.fullName }, this.closeStudentDropdown);\r\n    }\r\n\r\n    setSelectedClass = (item:ClassLevel) => {\r\n        this.props.item.classLevel = item;\r\n    }\r\n\r\n    submitForm = (e:FormEvent) => {\r\n        e.preventDefault();\r\n        const { item } = this.props;\r\n        if (!item.student || item.student.id < 1 || !item.classLevel || item.classLevel.id < 1) {\r\n            this.toast.showDanger(\"Please select student and class correctly\");\r\n            return;\r\n        }\r\n        this.props.onSubmit(e);\r\n    }\r\n\r\n    render() {\r\n        const { students, classes, searchStudent } = this.state;\r\n        return (\r\n            <div className=\"formEditContainer\">\r\n                <form onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    this.loadStudents();\r\n                }}>\r\n                    <p>Student</p>\r\n                    <div className=\"input-group\">\r\n                        <input \r\n                            type=\"search\"\r\n                            className=\"form-control\" \r\n                            name=\"searchStudent\" \r\n                            value={searchStudent}\r\n                            placeholder=\"Full Name\"\r\n                            onChange={this.handleInputChange} \r\n                            required \r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                            <input type=\"submit\" className=\"btn btn-primary\" value={\"Search\"}/>\r\n                        </div>\r\n                    </div>\r\n                        \r\n                    <div style={{position: 'absolute',width:'75%'}}>\r\n                        {students.length > 0 ?\r\n                        <div className=\"bg-light border border-dark px-2 py-1 w-100\" style={{position: 'relative'}}>\r\n                            <ActionButton className=\"btn btn-text btn-sm\" iconClass=\"fas fa-times\" onClick={this.closeStudentDropdown}>\r\n                                close\r\n                            </ActionButton>\r\n                            <div style={{overflowY:'auto', height: '100px'}}>\r\n                                <div className=\"no-wrap\" style={{ width: 'max-content' }}>\r\n                                    {students.map(e => {\r\n                                        return (\r\n                                            <div key={\"set-emp-\"+e.id}>\r\n                                                <a className=\"btn btn-text clickable\" onClick={()=>this.setSelectedStudent(e)}>\r\n                                                   {e.nisKiis} - {e.user.fullName.trim()}\r\n                                                </a>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        </div> : null }\r\n\r\n                    </div>\r\n                \r\n                </form>\r\n                <form onSubmit={this.submitForm}>\r\n                    <p>Active Class Level</p>\r\n                    <select className=\"form-control\" >\r\n                        {classes.map(item => {\r\n                            return (\r\n                                <option key={\"select-class-\"+item.id} onClick={(e) => this.setSelectedClass(item)}>\r\n                                    {item.level}{item.letter} - {item.school.name}\r\n                                </option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                    <p></p>\r\n                    <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { resolve } from 'inversify-react';\r\nimport React, { Component, Fragment } from 'react'\r\nimport { Navigate, Route, Routes } from 'react-router-dom';\r\nimport BaseProps from '../models/BaseProps';\r\nimport EmployeesPage from '../pages/admin/masterData/EmployeesPage';\r\nimport MainAdminPage from '../pages/admin/MainAdminPage';\r\nimport SchoolsPage from '../pages/admin/masterData/SchoolsPage';\r\nimport UsersPage from '../pages/admin/masterData/UsersPage';\r\nimport LoginPage from '../pages/auth/LoginPage';\r\nimport { ErrorView } from '../pages/error/ErrorView';\r\nimport Home from '../pages/home/Home';\r\nimport Dashboard from '../pages/user/Dashboard';\r\nimport EditProfile from '../pages/user/EditProfile';\r\nimport AuthService from './../services/AuthService';\r\nimport RoutingService from './../services/RoutingService';\r\nimport AuthorityType from './../constants/AuthorityType';\r\nimport SemesterPeriodsPage from '../pages/admin/masterData/SemesterPeriodsPage';\r\nimport ClassLevelsPage from '../pages/admin/masterData/ClassLevelsPage';\r\nimport StudentsPage from '../pages/admin/masterData/StudentsPage';\r\nimport ClassMembersPage from '../pages/admin/masterData/ClassMembersPage';\r\n\r\nexport class Routing extends Component<BaseProps, any> {\r\n    @resolve(AuthService)\r\n    private authService: AuthService;\r\n    @resolve(RoutingService)\r\n    private routingService: RoutingService;\r\n\r\n    render(): React.ReactNode {\r\n        return (\r\n            <Fragment>\r\n\r\n                <Routes>\r\n                    <Route path=\"/\" element={<Home />} />\r\n                    <Route path=\"/home\" element={<Home />} />\r\n\r\n                    <Route path=\"/login\" element={\r\n                        <RestrictedRouteElement disabledWhenLoggedIn={true} to=\"/login\" element={<LoginPage/>} />\r\n                    } />\r\n\r\n                    <Route path=\"/dashboard\" element={\r\n                       <RestrictedRouteElement to=\"/dashboard\" element={<Dashboard /> } /> \r\n                    } />\r\n                    <Route path=\"/profile\" element={\r\n                        <RestrictedRouteElement to='/profile' element={<EditProfile />} />\r\n                    } />\r\n\r\n                    <Route path=\"/admin\" element={\r\n                        <RestrictedRouteElement to=\"/admin\" element={<MainAdminPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/users\" element={\r\n                        <RestrictedRouteElement to=\"/admin/users\" element={<UsersPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/schools\" element={\r\n                        <RestrictedRouteElement to=\"/admin/schools\" element={<SchoolsPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/employees\" element={\r\n                        <RestrictedRouteElement to=\"/admin/employees\" element={<EmployeesPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/semesterperiods\" element={\r\n                        <RestrictedRouteElement to=\"/admin/semesterperiods\" element={<SemesterPeriodsPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/classlevels\" element={\r\n                        <RestrictedRouteElement to=\"/admin/classlevels\" element={<ClassLevelsPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/students\" element={\r\n                        <RestrictedRouteElement to=\"/admin/students\" element={<StudentsPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n                    <Route path=\"/admin/classmembers\" element={\r\n                        <RestrictedRouteElement to=\"/admin/classmembers\" element={<ClassMembersPage/>} requiredRole={'ROLE_SUPERADMIN'} />\r\n                    } />\r\n\r\n                    <Route path=\"*\" element={<ErrorView message=\"The requested page is not found.\" />} />\r\n                </Routes>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nclass RestrictedRouteElement extends Component<{\r\n    to:string, \r\n    element: JSX.Element, \r\n    disabledWhenLoggedIn?:boolean,\r\n    requiredRole?: AuthorityType | AuthorityType[]\r\n}, any> {\r\n\r\n    @resolve(AuthService)\r\n    private authService: AuthService;\r\n    @resolve(RoutingService)\r\n    private routingService: RoutingService;\r\n\r\n    render(): React.ReactNode {\r\n        const loggedIn = this.authService.loggedIn;\r\n\r\n        if (this.props.disabledWhenLoggedIn === true) {\r\n            if (!loggedIn) {\r\n                return this.props.element;\r\n            }\r\n            return (\r\n                <Navigate to=\"/dashboard\" />\r\n            )\r\n        }\r\n        \r\n        if (loggedIn) {\r\n            if (this.props.requiredRole) {\r\n                if (this.authService.loggedUser?.hasAuthorityType(this.props.requiredRole))  {\r\n                    return this.props.element;\r\n                } else {\r\n                    return <Navigate to=\"/\" />\r\n                }\r\n            } else {\r\n                return this.props.element;\r\n            }\r\n        }\r\n        return (\r\n            <CustomNavigate origin={this.props.to} routing={this.routingService} to=\"/\" />\r\n        )\r\n    }\r\n}\r\n\r\ninterface NavigateProps {\r\n    origin: string,\r\n    to: string,\r\n    state?: any,\r\n    replace?: any,\r\n    routing: RoutingService\r\n}\r\nconst CustomNavigate = (props: NavigateProps) => {\r\n    props.routing.setLastRedirectedRoute(props.origin);\r\n    return <Navigate to = { props.to } state = { props.state } replace = { props.replace } />\r\n}","import { Component, ReactNode } from \"react\";\r\nimport { commonWrapper } from './../utils/commonWrapper';\r\nimport User from './../models/User';\r\nimport { resolve } from \"inversify-react\";\r\nimport AuthService from './../services/AuthService';\r\nimport DialogService from './../services/DialogService';\r\nimport BaseProps from './../models/BaseProps';\r\nimport RoutingService from './../services/RoutingService';\r\n\r\ninterface Props  extends BaseProps {\r\n    user:User\r\n}\r\nclass State  {\r\n    showDropdown: boolean = false;\r\n}\r\nclass UserSection extends Component<Props, State> {\r\n    state: Readonly<State> = new State();\r\n\r\n    @resolve(AuthService)\r\n    private authService:AuthService;\r\n    @resolve(DialogService)\r\n    private dialog:DialogService;\r\n    @resolve(RoutingService)\r\n    private routing:RoutingService;\r\n\r\n    logout = () => {\r\n        this.dialog.showConfirmDanger(\"Logout\", \"Do you want to logout?\")\r\n            .then(ok => {\r\n                if (ok) {\r\n                    this.authService.logout();\r\n                }\r\n            });\r\n        this.hideDropdown();\r\n    }\r\n    navigate = (e:React.MouseEvent<HTMLAnchorElement>) => {\r\n        const target = e.target as HTMLAnchorElement;\r\n        \r\n        if (target.dataset['to'])\r\n            this.routing.navigate(target.dataset['to']);\r\n        this.hideDropdown();\r\n    }\r\n\r\n    hideDropdown = () => {\r\n        this.setState({showDropdown: false});\r\n    }\r\n    \r\n    toggleDropdown = () => {\r\n        this.setState({ showDropdown: !this.state.showDropdown });\r\n    }\r\n    render(): ReactNode {\r\n\r\n        return (\r\n            <div >\r\n                <a className=\"btn btn-light no-wrap\" onClick={this.toggleDropdown}>\r\n                    <i className=\"fas fa-user me-3\" /> {this.props.user.displayName}\r\n                </a>\r\n                <div style={{position: 'absolute'}}>\r\n                    { this.state.showDropdown? \r\n                    <div\r\n                        style={{width: '200px', zIndex: 1, position: 'relative'}}\r\n                        className=\"bg-light border border-gray rounded text-start pt-3 pb-3\" >\r\n                        \r\n                        <a className=\"btn btn-text\" onClick={this.navigate} data-to=\"/dashboard\">\r\n                            <i className=\"fas fa-home me-3\"/>Dashboard\r\n                        </a>\r\n                        <a className=\"btn btn-text\" onClick={this.navigate} data-to=\"/profile\">\r\n                            <i className=\"fas fa-user-cog me-3\"/>Edit Profile\r\n                        </a>\r\n                        { this.authService.isAdmin ?\r\n                        <a className=\"btn btn-text text-success\" onClick={this.navigate} data-to=\"/admin\">\r\n                            <i className=\"fas fa-tachometer-alt me-3\"/>Admin Area\r\n                        </a> : null }\r\n                      \r\n                        <a className=\"btn btn-text text-danger\" onClick={this.logout}>\r\n                            <i className=\"fas fa-sign-out-alt me-3\"/>Logout\r\n                        </a>\r\n                    </div> : null }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default commonWrapper(UserSection);","import { resolve } from \"inversify-react\";\r\nimport React, { FormEvent  } from \"react\";  \r\nimport { Link } from \"react-router-dom\";\r\nimport BaseProps from \"../models/BaseProps\";\r\nimport { commonWrapper } from \"../utils/commonWrapper\";\r\nimport RoutingService from './../services/RoutingService';\r\nimport Settings from './../settings';\r\nimport AuthService from './../services/AuthService';\r\nimport ControlledComponent from \"../pages/ControlledComponent\";\r\nimport UserSection from \"./UserSection\";\r\nimport User from './../models/User';\r\nimport EventService from './../services/EventService';\r\nimport ApplicationProfile from \"../models/ApplicationProfile\";\r\n\r\nclass State {\r\n    activeMenu:string | undefined;\r\n    title:string        = Settings.App.uiSetting.defaultTitle;\r\n    searchKey:string    = \"\";\r\n }\r\n class Props extends BaseProps {\r\n     currentLocation?:Location;\r\n }\r\nclass HeaderView extends ControlledComponent<Props, State> {\r\n    @resolve(AuthService)\r\n    private authService:AuthService;\r\n    @resolve(RoutingService)\r\n    private routingService:RoutingService;\r\n\r\n    state:State = new State();\r\n\r\n    private _user:User | undefined;\r\n    \r\n    componentDidMount() \r\n    {\r\n        this.routingService.registerCallback(\"header\", console.log);\r\n        this.authService.addOnUserUpdated(\"header\", this.onUserUpdated);\r\n        this.authService.addOnAppProfileUpdated(\"header\", this.onAppProfileUpdated);\r\n    }\r\n    componentWillUnmount()\r\n    {\r\n        this.authService.removeOnUserUpdated(\"header\");\r\n        this.authService.removeOnAppProfileUpdated(\"header\");\r\n    }\r\n    gotoLoginPage = () => {\r\n        if (this.props.navigate)\r\n        {\r\n            this.props.navigate(\"/login\");\r\n        }\r\n    }\r\n    onUserUpdated = (user: User | undefined) => {\r\n        if (this._user !== undefined && user === undefined)\r\n        {\r\n            this.gotoLoginPage();\r\n        }\r\n        this._user = user;\r\n        this.forceUpdate();\r\n    }\r\n    onAppProfileUpdated = (val: ApplicationProfile | undefined) => {\r\n        this.forceUpdate();\r\n    }\r\n\r\n    private navigate = (url:string) => {\r\n        if (this.props.navigate === undefined)\r\n        {\r\n            console.warn(\"no props: navigate\");\r\n            return;\r\n        }\r\n        this.props.navigate(url);\r\n    }\r\n\r\n    brandOnClick = () => {\r\n       this.navigate(\"/\");\r\n    }\r\n    get semesterInfo() {\r\n        const appProfile = this.authService.appProfile;\r\n        if (appProfile && appProfile.semester && appProfile.semester) {\r\n            return \"Semester \" + appProfile.semester + \" | \" + appProfile.year;\r\n        }\r\n        return undefined;\r\n    }\r\n    render() {\r\n        const title = this.authService.appProfile ? this.authService.appProfile.name : this.state.title;\r\n        return (\r\n            <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row w-100 mt-2\">\r\n                        <div className=\"col-md-2 mb-2 text-center d-flex\" style={{alignItems: 'center'}}>\r\n                            <img src=\"/kiis-stroke.png\" width={50} className=\"me-2\" />\r\n                            <div className={\"text-start\"}>\r\n                                <Link className=\"navbar-brand\" to=\"/\">{title}</Link>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-7 mb-2 d-flex text-center text-secondary\" style={{alignItems: 'center'}}>\r\n                            <p style={{margin: 'auto'}}>{this.semesterInfo}</p>\r\n                        </div>\r\n                        <div className=\"col-md-2 mb-2 text-center\">\r\n                            { !this.authService.loggedIn?\r\n                            <Link to=\"/login\" className=\"btn btn-primary\">\r\n                               <i className=\"fas fa-sign-in-alt me-2\"/> Login\r\n                            </Link>\r\n                            : \r\n                            <UserSection user={this.authService.loggedUser}/> }\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </nav>\r\n        )\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default commonWrapper(HeaderView);\r\n\r\n\r\n","\n\nimport { resolve } from 'inversify-react';\nimport { Component, ReactNode } from 'react';\nimport LoadingService from '../../services/LoadingService';\nimport LoadingComponent from '../../interfaces/LoadingComponent';\nimport './Loading.scss';\nimport { invokeLater } from './../../utils/eventUtil';\n\nconst TRANSITION_DURATION = 300;\nconst ACTIVE_OPACITY = 0.7;\ntype State = {\n    show: boolean;\n    opacity: number;\n}\n\nexport default class Loading extends Component<any, State> implements LoadingComponent {\n    \n    @resolve(LoadingService)\n    private service:LoadingService;\n\n    constructor(props:any) {\n        super(props);\n        this.state = {\n            show: false,\n            opacity: 0,\n        }\n    }\n    startLoading() {\n        this.setState({ show: true, opacity: ACTIVE_OPACITY });\n    }\n    stopLoading() {\n        this.setState({ opacity: 0 }, () => {\n           invokeLater(() => this.setState({ show: false }), 300);\n        });\n    }\n    componentDidMount() {\n        this.service.setComponent(this);\n    }\n    render(): ReactNode {\n        if (!this.state.show) {\n            return null;\n        }\n        const outerSize = 14;\n        const innerSize = 12;\n        const transitionDuration = `${TRANSITION_DURATION}ms`;\n        return (\n            <div \n                className='loading bg-secondary border border-secondary rounded px-2 py-1 text-center'\n                style={{ opacity: this.state.opacity, transitionDuration: transitionDuration }} \n            >\n                <h3 className='text-light'>Loading</h3>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={`0 0 120 ${outerSize}`} width=\"120\" height={outerSize}>\n                    <path \n                        className='loadingBarContainer' \n                        fill=\"none\" \n                        strokeWidth={outerSize} \n                        d={`M 5 ${outerSize/2} L 5 ${outerSize/2} L 115 4 `} \n                    />\n                    <path \n                        className='loadingBar' \n                        fill=\"none\" \n                        strokeWidth={innerSize}\n                        d={`M 6 ${outerSize/2} L 6 ${outerSize/2} L 114 4 `} \n                    />\n                </svg>\n\n            </div>\n        )\n    }\n}","\nimport { Component, ReactNode } from 'react';\nimport AnchorButton from '../buttons/AnchorButton';\nimport ToastItem from './ToastItem';\nimport { invokeLater } from './../../utils/eventUtil';\n\ntype Props = {\n    item: ToastItem,\n    onClose: (id: number) => any,\n}\n\ntype State = {\n    opacity: number,\n}\n\nconst TRANSITION_DURATION = 300;\n\nexport default class Toast extends Component<Props, State> {\n    constructor(props:Props) {\n        super(props);\n        this.state = {\n            opacity: 1,\n        };\n    }\n    onClose = () => {\n        this.setState({ opacity: 0 }, () => {\n            invokeLater(() => this.props.onClose(this.props.item.id), TRANSITION_DURATION);\n        })\n    }\n    render(): ReactNode {\n        const { item } = this.props;\n        const { opacity } = this.state;\n        return (\n            <div className='toast show mb-2' style={{  opacity: opacity, transitionDuration: `${TRANSITION_DURATION}ms` }}>\n                <div \n                    className={`alert alert-${item.mode} mb-0 d-flex`}\n                    style={{ flexWrap: 'nowrap', alignItems: 'center'}}\n                >\n                    <p style={{ margin: 'auto' }}>{item.message}</p>\n                    <AnchorButton \n                        iconClass='fas fa-times' \n                        className='btn btn-text btn-sm ms-3' \n                        onClick={(e) => this.onClose()}\n                    />\n                </div>\n            </div>\n        )\n    }\n}","\nimport { id } from 'inversify';\nimport { resolve } from 'inversify-react';\nimport { Component, ReactNode, RefObject } from 'react';\nimport AnchorButton from '../buttons/AnchorButton';\nimport ToastMode from '../../constants/ToastMode';\nimport ToastComponent from '../../interfaces/ToastComponent';\nimport { invokeLater } from '../../utils/eventUtil';\nimport ToastService from '../../services/ToastService';\nimport ToastItem from './ToastItem';\nimport Toast from './Toast';\nimport React from 'react';\n\n\n\ntype State = {\n    items: ToastItem[]\n}\n\nexport default class ToastContainer extends Component<any, State> implements ToastComponent {\n    \n    @resolve(ToastService)\n    private service: ToastService;\n\n    static ToastId:number = 1;\n\n    private toastRefs: Map<number, RefObject<Toast>> = new Map();\n\n    constructor(props:any) {\n        super(props);\n        this.state = {\n            items: []\n        }\n    }\n    componentDidMount() {\n        this.service.setComponent(this);\n    }\n    show = (message: string, mode: ToastMode, duration: number = 5000) => {\n        const { items } = this.state;\n        const id = ToastContainer.ToastId;\n        items.push({\n            id: id,\n            message: message,\n            mode: mode,\n            duration: duration\n        });\n        this.setState({ items: items }, ()=> {\n            invokeLater(() => {\n                const current = this.getRef(id)?.current;\n                if (current) {\n                    current.onClose();\n                }\n            }, duration);\n        });\n        ToastContainer.ToastId+=1;\n    }\n    closeToast = (id:number) => {\n        const { items } = this.state;\n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            if (item.id === id) {\n                items.splice(i, 1);\n\n                this.toastRefs.delete(item.id);\n                this.setState({ items: items });\n                break;\n            }            \n        }\n    }\n    getRef = (id: number) => {\n        if (!this.toastRefs.has(id)) {\n            this.toastRefs.set(id, React.createRef());\n        }\n        return this.toastRefs.get(id);\n    }\n    render(): ReactNode {\n        const { items } = this.state;\n        const reversed = items.reverse();\n        return (\n             <div className=\"toast-custom\">\n                {reversed.map((item) => {\n                    return (\n                        <Toast \n                            ref={this.getRef(item.id)} \n                            key={\"toast-\"+item.id} \n                            item={item} \n                            onClose={this.closeToast} \n                        />\n                    )\n                })}\n             </div>\n        )\n    }\n}\n","import React, { Component, Fragment } from 'react'\r\nimport { DialogType } from '../../constants/DialogType';\r\nimport Settings from '../../settings';\r\nimport { invokeLater } from '../../utils/eventUtil';\r\n\r\ntype ButtonRef              = React.RefObject< HTMLButtonElement >;\r\nconst initialMargin         = '-560px';\r\nconst transitionDuration    = '250ms';\r\nconst BACK_COLOR            = 'rgba(100,100,100,0.7)';\r\n\r\nclass State {\r\n    backColor: string = 'transparent';\r\n    marginTop: string = initialMargin;\r\n}\r\ninterface Props  {\r\n    onConfirm:(arg:any)=>any;\r\n    onCancel:(arg:any)=>any;\r\n    onClose:(arg:any)=>any;\r\n\r\n    type:DialogType;\r\n    yesOnly:boolean;\r\n    yesLabel:string;\r\n\r\n    title?:string;\r\n\r\n    children:any;\r\n}\r\nclass Dialog extends Component<Props, State> {\r\n    yesButton:ButtonRef     = React.createRef();\r\n    cancelButton:ButtonRef  = React.createRef();\r\n    state:State             = new State();\r\n\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    onConfirm = (e:any) => {        \r\n        this.close(()=>{\r\n            this.props.onConfirm(e);\r\n        });\r\n    }\r\n    close = (callback:()=>any)=> {\r\n        invokeLater(()=>{\r\n            this.setState({ backColor:'transparent', marginTop: initialMargin }, ()=>{\r\n                invokeLater(callback, 100);\r\n            });\r\n        }, 100);\r\n    }\r\n    onCancel = (e:any) => {\r\n        this.close(()=>{\r\n            if (this.props.onCancel) {\r\n                this.props.onCancel(e);\r\n            }\r\n        });\r\n    }\r\n    onClose = (e:any) => {\r\n        this.close(()=>{\r\n            this.props.onClose(e);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        const focusCancelBtn = this.props.type === DialogType.ERROR || this.props.type === DialogType.WARNING ;\r\n        if (!focusCancelBtn && this.yesButton.current)  {\r\n            this.yesButton.current.focus();\r\n        }  else if (focusCancelBtn && this.cancelButton.current)  {\r\n            this.cancelButton.current.focus();\r\n        } else if (focusCancelBtn && this.yesButton.current) {\r\n            this.yesButton.current.focus();\r\n        }\r\n\r\n        invokeLater(()=>{\r\n            let marginTop = this.stringContent ? '30vh' : '0vh';\r\n            this.setState({backColor:BACK_COLOR, marginTop: marginTop})\r\n        }, 100);\r\n    }\r\n\r\n    get stringContent() { return typeof this.props.children === \"string\"; }\r\n\r\n    get headerClassName() : string\r\n    {\r\n        switch (this.props.type) {\r\n            case DialogType.INFO:\r\n            case DialogType.INFO_NO_BUTTONS : \r\n                                      return \"bg-info text-light\";\r\n            case DialogType.WARNING : return \"bg-warning text-dark\";\r\n            case DialogType.ERROR   : return \"bg-danger text-light\";\r\n        \r\n            default                 : return \"bg-secondary\";\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title     = this.props.title ? this.props.title:  \"Info\";\r\n        const yesOnly   = this.props.yesOnly === true;\r\n        const maxWidth  = this.stringContent? '500px': '85vw';\r\n\r\n        const dialogStyle = {\r\n            transitionDuration:  transitionDuration,\r\n            marginTop: this.state.marginTop,\r\n            maxWidth: maxWidth,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto'\r\n        };\r\n        const modalDialogClass =  this.stringContent ? \"modal-dialog -modal-dialog-centered\" : \"-modal-dialog-centered\";\r\n        return (\r\n            <Fragment>\r\n                <Backdrop bgColor={this.state.backColor} />\r\n                <div className=\"modal show d-block\">\r\n                    <div \r\n                        className={modalDialogClass}\r\n                        style={dialogStyle}\r\n                    >\r\n                        <div className=\"modal-content mt-5\">\r\n                            <Header \r\n                                className={this.headerClassName} \r\n                                title={title} \r\n                                onClose={this.onClose} \r\n                            />\r\n                            <div className=\"modal-body\" style={{ maxHeight: '70vh', overflow: 'auto' }} >{this.props.children}</div>\r\n                            { this.props.type === DialogType.INFO_NO_BUTTONS? \r\n                            <div className={\"modal-footer \"} >\r\n                                <h6 className='w-100 text-center'>{Settings.App.uiSetting.defaultTitle}</h6>\r\n                            </div> \r\n                            :\r\n                            <Footer \r\n                                cancelButton={this.cancelButton} \r\n                                yesLabel={this.props.yesLabel}\r\n                                yesButton={this.yesButton} \r\n                                yesOnly={yesOnly} \r\n                                onConfirm={this.onConfirm} \r\n                                onCancel={this.onCancel} \r\n                            /> }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props:{bgColor:string}) {\r\n    const style = { transitionDuration:transitionDuration, backgroundColor: props.bgColor };\r\n    return (\r\n        <div className=\"modal-backdrop\" style={style} />\r\n    );\r\n}\r\n\r\nfunction Footer(props:{yesLabel:string, yesButton:ButtonRef, cancelButton:ButtonRef, yesOnly:boolean, onConfirm:(e:any)=>any, onCancel?:(e:any)=>any}) {\r\n    return (\r\n        <div className={\"modal-footer\"} >\r\n            <button \r\n                ref={props.yesButton} \r\n                type=\"button\"\r\n                onClick={props.onConfirm} \r\n                className=\"btn btn-outline-primary\" >\r\n                {props.yesLabel}\r\n            </button>\r\n            {props.yesOnly ? \r\n                null : \r\n                <button \r\n                    ref={props.cancelButton} \r\n                    type=\"button\"\r\n                    onClick={props.onCancel} \r\n                    className=\"btn btn-outline-secondary\" >\r\n                    No\r\n                </button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props:{ title:string, className:string, onClose:(e:any)=>any }) {\r\n    return (\r\n        <div className={\"modal-header \" + props.className} >\r\n            <h5 className=\"modal-title\" id=\"exampleModalCenterTitle\" >{props.title}</h5>\r\n            <button onClick={props.onClose} type=\"button\" className=\"close btn btn-text text-light\" >\r\n                <span><i className=\"fas fa-times\" /></span>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialog;","import { resolve } from \"inversify-react\";\nimport React, { ReactElement, RefObject } from \"react\";\nimport { Component } from \"react\";\nimport { DialogType } from \"../../constants/DialogType\";\nimport DialogProps from \"../../models/DialogProps\";\nimport DialogService from \"../../services/DialogService\";\nimport Dialog from \"./Dialog\";\nimport { DialogObserver } from './DialogObserver';\n\ntype DialogState = { show: boolean };\n\nexport default class DialogContainer extends Component<any, DialogState> {\n    \n    // dialog props\n    dialogTitle: string;\n    dialogContent: any;\n    dialogYesOnly: boolean;\n\n    yesLabel: string = \"Yes\";\n\n    dialogOnConfirm: (e: any) => any;\n    dialogOnCancel: (e: any) => any;\n\n    onCloseCallback?: (e: any) => any;\n\n\n\n    dialogType: DialogType = DialogType.INFO;\n\n    @resolve(DialogService)\n    private dialogService: DialogService;\n    private ref: RefObject<Dialog> = React.createRef();\n\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            show: false,\n        };\n    }\n    \n\n    // fired when confirmed/canceled\n    public dismissAlert = () => {\n        if (this.ref.current) {\n            this.ref.current.close(() => {\n                this.setState({ show: false });\n            })\n            return;\n        }\n        this.setState({ show: false });\n    }\n\n    // fired when pressing [X] button\n    dialogOnClose = (e: any) => {\n\n        this.setState({ show: false }, () => {\n            if (this.onCloseCallback) {\n                this.onCloseCallback(e);\n            }\n\n            this.resetProps();\n        });\n    }\n    setContent(content: ReactElement<DialogProps, typeof Component>) {\n        this.dialogContent = content;\n        this.forceUpdate();\n    }\n    componentDidMount() {\n        this.dialogService.setContainer(this);\n    }\n    resetProps = () => {\n        this.onCloseCallback = undefined;\n        this.yesLabel = \"Yes\";\n    }\n    get isShown() { return this.state.show }\n\n    public showNoButtons = (title: string, content: any, onClose: (e: any) => any, dialogObserver?: DialogObserver) => {\n        this.dialogType = DialogType.INFO_NO_BUTTONS;\n        this.dialogTitle = title;\n        this.dialogContent = content;\n        if (dialogObserver)\n        dialogObserver.close = this.dismissAlert;\n\n        this.display();\n    }\n    public show = (\n        type: DialogType,\n        title: string,\n        content: any,\n        yesOnly: boolean,\n        onConfirm: (e: any) => any,\n        onCancel?: (e: any) => any,\n        yesLabel?: string\n    ) => {\n\n        this.dialogType = type;\n        this.dialogTitle = title;\n        this.dialogContent = content;\n        this.dialogYesOnly = yesOnly;\n        this.yesLabel = yesLabel ? yesLabel : this.yesLabel;\n\n        this.dialogOnConfirm = (e: any) => {\n            this.dismissAlert();\n            onConfirm(e);\n        }\n        this.onCloseCallback = onCancel;\n        if (!yesOnly) {\n\n            this.dialogOnCancel = (e: any) => {\n                this.dismissAlert();\n                if (onCancel) {\n                    onCancel(e);\n                }\n            };\n        }\n        this.display();\n    }\n\n    display() {\n        this.setState({ show: true });\n    }\n\n    render(): React.ReactNode {\n\n        return (\n            this.state.show ?\n                <Dialog\n                    ref={this.ref}\n                    title={this.dialogTitle}\n                    yesOnly={this.dialogYesOnly}\n                    onConfirm={this.dialogOnConfirm}\n                    onCancel={this.dialogOnCancel}\n                    onClose={this.dialogOnClose}\n                    type={this.dialogType}\n\n                    yesLabel={this.yesLabel}\n                >\n                    {this.dialogContent}\n                </Dialog> : null\n        );\n    }\n}\n","import React, { Component, Fragment, ReactElement, RefObject } from 'react';\r\nimport './App.scss'; \r\nimport { Routing } from './layout/Routing';\r\nimport { useLocation, Location } from 'react-router-dom';\r\nimport { resolve } from 'inversify-react';\r\nimport HeaderView from './layout/HeaderView';\r\nimport Dialog from './components/dialog/Dialog';\r\nimport { DialogType } from './constants/DialogType';\r\nimport DialogService from './services/DialogService';\r\nimport { Chart as ChartJS, CategoryScale, Legend, LinearScale, LineElement, PointElement, Title, Tooltip } from 'chart.js';\r\n \r\nimport DialogProps from './models/DialogProps';\r\nimport AuthService from './services/AuthService';\r\nimport { invokeLater } from './utils/eventUtil';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { NavigateFunction } from 'react-router-dom';\r\nimport RoutingService from './services/RoutingService';\r\nimport Loading from './components/loading/Loading';\r\nimport ToastContainer from './components/toast/ToastContainer';\r\nimport DialogContainer from './components/dialog/DialogContainer';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\n\r\n\r\nfunction App() {\r\n  const loc:Location = useLocation();\r\n  const navigate:NavigateFunction = useNavigate();\r\n  return (\r\n    <Fragment>\r\n      <HeaderView currentLocation={loc}/>\r\n      <Root navigate={navigate}/>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nclass State  {\r\n  loaded:boolean = false;\r\n  loadingError:boolean = false;\r\n}\r\nclass Root extends Component<{navigate:NavigateFunction},State> {\r\n  @resolve(AuthService)\r\n  private authService:AuthService;\r\n  @resolve(RoutingService)\r\n  private routingService:RoutingService;\r\n\r\n  state: Readonly<State> =new State();\r\n\r\n  componentDidMount()\r\n  {\r\n    this.routingService.setNavigate(this.props.navigate);\r\n    invokeLater(this.load, 100);\r\n  }\r\n  load = () => {\r\n    this.setState({ loadingError: false });\r\n    \r\n    this.authService.loadApplication()\r\n      .then(()=>{\r\n        this.setState({ loaded: true });\r\n      })\r\n      .catch((e)=>{\r\n        console.error(e);\r\n        this.setState({ loadingError: true });\r\n      })\r\n  }\r\n\r\n  render(): React.ReactNode {\r\n\r\n    if (this.state.loadingError === true)\r\n    {\r\n      return (\r\n        <div className='w-100 text-center'>\r\n          <h3 className=\"mt-5 text-danger\">Error while loading content</h3>\r\n          <a className='btn btn-outline-dark btn-sm' onClick={this.load}>\r\n            <i className='fas fa-redo me-3'></i>\r\n            Reload\r\n          </a>\r\n        </div>\r\n      )\r\n    }\r\n    if (this.state.loaded === false)\r\n    {\r\n      return (<h3 className='mt-5 text-center text-secondary'>Loading content</h3>)\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <DialogContainer/>\r\n        <ToastContainer />\r\n        <Routing />\r\n        <Loading />\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter, HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'inversify-react';\r\nimport { container } from './inversify.config';\r\n\r\n// configure monaco editor\r\n// @ts-ignore \r\nglobal.self.MonacoEnvironment = {\r\n\tgetWorkerUrl: function (_moduleId: any, label: string) {\r\n\t\tconsole.log(\"get worker function: \", _moduleId, label);\r\n\t\tif (label === 'json') {\r\n\t\t\treturn './editorworkers/json.worker.bundle.js';\r\n\t\t}\r\n\t\tif (label === 'css' || label === 'scss' || label === 'less') {\r\n\t\t\treturn './editorworkers/css.worker.bundle.js';\r\n\t\t}\r\n\t\tif (label === 'html' || label === 'handlebars' || label === 'razor') {\r\n\t\t\treturn './editorworkers/html.worker.bundle.js';\r\n\t\t}\r\n\t\tif (label === 'typescript' || label === 'javascript') {\r\n\t\t\treturn './editorworkers/ts.worker.bundle.js';\r\n\t\t}\r\n\t\tif (label === 'yaml' || label === 'yml')\r\n\t\t{\r\n\t\t\treturn  './editorworkers/yaml.worker/js';\r\n\t\t}\r\n\t\treturn './editorworkers/editor.worker.bundle.js';\r\n\t}\r\n};\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider container={container} >\r\n    <HashRouter>\r\n\r\n      <App />\r\n    </HashRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}